function MarkerClusterer(e,t,o){this.extend(MarkerClusterer,google.maps.OverlayView),this.map_=e,this.markers_=[],this.clusters_=[],this.sizes=[53,56,66,78,90],this.styles_=[],this.ready_=!1;var a=o||{};this.gridSize_=a.gridSize||60,this.minClusterSize_=a.minimumClusterSize||2,this.maxZoom_=a.maxZoom||null,this.styles_=a.styles||[],this.imagePath_=a.imagePath||this.MARKER_CLUSTER_IMAGE_PATH_,this.imageExtension_=a.imageExtension||this.MARKER_CLUSTER_IMAGE_EXTENSION_,this.zoomOnClick_=!0,null!=a.zoomOnClick&&(this.zoomOnClick_=a.zoomOnClick),this.averageCenter_=!1,null!=a.averageCenter&&(this.averageCenter_=a.averageCenter),this.setupStyles_(),this.setMap(e),this.prevZoom_=this.map_.getZoom();var r=this;google.maps.event.addListener(this.map_,"zoom_changed",function(){var e=r.map_.getZoom(),t=r.map_.minZoom||0,o=Math.min(r.map_.maxZoom||100,r.map_.mapTypes[r.map_.getMapTypeId()].maxZoom);e=Math.min(Math.max(e,t),o),r.prevZoom_!=e&&(r.prevZoom_=e,r.resetViewport())}),google.maps.event.addListener(this.map_,"idle",function(){r.redraw()}),t&&(t.length||Object.keys(t).length)&&this.addMarkers(t,!1)}function Cluster(e){this.markerClusterer_=e,this.map_=e.getMap(),this.gridSize_=e.getGridSize(),this.minClusterSize_=e.getMinClusterSize(),this.averageCenter_=e.isAverageCenter(),this.center_=null,this.markers_=[],this.bounds_=null,this.clusterIcon_=new ClusterIcon(this,e.getStyles(),e.getGridSize())}function ClusterIcon(e,t,o){e.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView),this.styles_=t,this.padding_=o||0,this.cluster_=e,this.center_=null,this.map_=e.getMap(),this.div_=null,this.sums_=null,this.visible_=!1,this.setMap(this.map_)}function project(e){var t=256,o=Math.sin(e.lat()*Math.PI/180);return o=Math.min(Math.max(o,-.9999),.9999),new google.maps.Point(t*(.5+e.lng()/360),t*(.5-Math.log((1+o)/(1-o))/(4*Math.PI)))}function getPixel(e,t){var o=1<<t,a=project(e);return new google.maps.Point(Math.floor(a.x*o),Math.floor(a.y*o))}function getMapDimenInPixels(e){var t=e.getZoom(),o=e.getBounds(),a=getPixel(o.getSouthWest(),t),r=getPixel(o.getNorthEast(),t);return{width:Math.abs(a.x-r.x),height:Math.abs(a.y-r.y)}}function willAnimatePanTo(e,t,o){var a=getMapDimenInPixels(e),r=e.getCenter();o=o||e.getZoom();var i=getPixel(t,o),n=getPixel(r,o),s=Math.abs(i.x-n.x),l=Math.abs(i.y-n.y);return s<a.width&&l<a.height}function getOptimalZoomOut(e,t,o){return willAnimatePanTo(e,t,o-1)?o-1:willAnimatePanTo(e,t,o-2)?o-2:o-3}function smoothlyAnimatePanToWorkarround(e,t,o,a){function r(){e.getZoom()<s?e.setZoom(Math.min(e.getZoom()+3,s)):(google.maps.event.removeListener(n),e.setOptions({draggable:!0,zoomControl:!0,scrollwheel:!0,disableDoubleClickZoom:!1}),o&&o())}function i(){willAnimatePanTo(e,t)?(google.maps.event.removeListener(n),n=google.maps.event.addListener(e,"idle",r),e.panTo(t)):e.setZoom(getOptimalZoomOut(e,t,e.getZoom()))}var n,s=a||e.getZoom();e.setOptions({draggable:!1,zoomControl:!1,scrollwheel:!1,disableDoubleClickZoom:!0}),e.setZoom(getOptimalZoomOut(e,t,s)),n=google.maps.event.addListener(e,"idle",i)}function smoothlyAnimatePanTo(e,t,o,a){willAnimatePanTo(e,t,a)?(e.panTo(t),o&&setTimeout(function(){o()},200)):smoothlyAnimatePanToWorkarround(e,t,o,a)}function smoothZoom(e,t,o){o>=t||(z=google.maps.event.addListener(e,"zoom_changed",function(a){google.maps.event.removeListener(z),smoothZoom(e,t,o+1)}),setTimeout(function(){e.setZoom(o)},220))}(function(){var e,t,o,a,r,i={}.hasOwnProperty,n=[].slice;this.OverlappingMarkerSpiderfier=function(){function e(e,a){var r,n,d;for(r in this.map=e,null==a&&(a={}),null==this.constructor.N&&(this.constructor.N=!0,o=google.maps,t=o.event,s=o.MapTypeId,l.keepSpiderfied=!1,l.ignoreMapClick=!1,l.markersWontHide=!1,l.markersWontMove=!1,l.basicFormatEvents=!1,l.nearbyDistance=20,l.circleSpiralSwitchover=9,l.circleFootSeparation=23,l.circleStartAngle=c/12,l.spiralFootSeparation=26,l.spiralLengthStart=11,l.spiralLengthFactor=4,l.spiderfiedZIndex=o.Marker.MAX_ZINDEX+2e4,l.highlightedLegZIndex=o.Marker.MAX_ZINDEX+1e4,l.usualLegZIndex=o.Marker.MAX_ZINDEX+1,l.legWeight=1.5,l.legColors={usual:{},highlighted:{}},d=l.legColors.usual,n=l.legColors.highlighted,d[s.HYBRID]=d[s.SATELLITE]="#fff",n[s.HYBRID]=n[s.SATELLITE]="#f00",d[s.TERRAIN]=d[s.ROADMAP]="#444",n[s.TERRAIN]=n[s.ROADMAP]="#f00",this.constructor.j=function(e){return this.setMap(e)},this.constructor.j.prototype=new o.OverlayView,this.constructor.j.prototype.draw=function(){}),a)i.call(a,r)&&(n=a[r],this[r]=n);this.g=new this.constructor.j(this.map),this.C(),this.c={},this.B=this.l=null,this.addListener("click",function(e,o){return t.trigger(e,"spider_click",o)}),this.addListener("format",function(e,o){return t.trigger(e,"spider_format",o)}),this.ignoreMapClick||t.addListener(this.map,"click",function(e){return function(){return e.unspiderfy()}}(this)),t.addListener(this.map,"maptypeid_changed",function(e){return function(){return e.unspiderfy()}}(this)),t.addListener(this.map,"zoom_changed",function(e){return function(){if(e.unspiderfy(),!e.basicFormatEvents)return e.h()}}(this))}var t,o,a,r,s,l,d,c,p;for(l=e.prototype,d=[e,l],a=0,r=d.length;a<r;a++)p=d[a],p.VERSION="1.0.3";return c=2*Math.PI,o=t=s=null,e.markerStatus={SPIDERFIED:"SPIDERFIED",SPIDERFIABLE:"SPIDERFIABLE",UNSPIDERFIABLE:"UNSPIDERFIABLE",UNSPIDERFIED:"UNSPIDERFIED"},l.C=function(){this.a=[],this.s=[]},l.addMarker=function(e,t){return e.setMap(this.map),this.trackMarker(e,t)},l.trackMarker=function(e,o){var a;return null!=e._oms?this:(e._oms=!0,a=[t.addListener(e,"click",function(t){return function(o){return t.V(e,o)}}(this))],this.markersWontHide||a.push(t.addListener(e,"visible_changed",function(t){return function(){return t.D(e,!1)}}(this))),this.markersWontMove||a.push(t.addListener(e,"position_changed",function(t){return function(){return t.D(e,!0)}}(this))),null!=o&&a.push(t.addListener(e,"spider_click",o)),this.s.push(a),this.a.push(e),this.basicFormatEvents?this.trigger("format",e,this.constructor.markerStatus.UNSPIDERFIED):(this.trigger("format",e,this.constructor.markerStatus.UNSPIDERFIABLE),this.h()),this)},l.D=function(e,t){if(!this.J&&!this.K)return null==e._omsData||!t&&e.getVisible()||this.unspiderfy(t?e:null),this.h()},l.getMarkers=function(){return this.a.slice(0)},l.removeMarker=function(e){return this.forgetMarker(e),e.setMap(null)},l.forgetMarker=function(e){var o,a,r,i,n;if(null!=e._omsData&&this.unspiderfy(),o=this.A(this.a,e),0>o)return this;for(n=this.s.splice(o,1)[0],a=0,r=n.length;a<r;a++)i=n[a],t.removeListener(i);return delete e._oms,this.a.splice(o,1),this.h(),this},l.removeAllMarkers=l.clearMarkers=function(){var e,t,o,a;for(a=this.getMarkers(),this.forgetAllMarkers(),e=0,t=a.length;e<t;e++)o=a[e],o.setMap(null);return this},l.forgetAllMarkers=function(){var e,o,a,r,i,n,s,l;for(this.unspiderfy(),l=this.a,e=o=0,a=l.length;o<a;e=++o){for(n=l[e],i=this.s[e],s=0,e=i.length;s<e;s++)r=i[s],t.removeListener(r);delete n._oms}return this.C(),this},l.addListener=function(e,t){var o;return(null!=(o=this.c)[e]?o[e]:o[e]=[]).push(t),this},l.removeListener=function(e,t){var o;return o=this.A(this.c[e],t),0>o||this.c[e].splice(o,1),this},l.clearListeners=function(e){return this.c[e]=[],this},l.trigger=function(){var e,t,o,a,r,i;for(t=arguments[0],e=2<=arguments.length?n.call(arguments,1):[],t=null!=(o=this.c[t])?o:[],i=[],a=0,r=t.length;a<r;a++)o=t[a],i.push(o.apply(null,e));return i},l.L=function(e,t){var a,r,i,n,s;for(n=this.circleFootSeparation*(2+e)/c,r=c/e,s=[],a=i=0;0<=e?i<e:i>e;a=0<=e?++i:--i)a=this.circleStartAngle+a*r,s.push(new o.Point(t.x+n*Math.cos(a),t.y+n*Math.sin(a)));return s},l.M=function(e,t){var a,r,i,n,s;for(n=this.spiralLengthStart,a=0,s=[],r=i=0;0<=e?i<e:i>e;r=0<=e?++i:--i)a+=this.spiralFootSeparation/n+5e-4*r,r=new o.Point(t.x+n*Math.cos(a),t.y+n*Math.sin(a)),n+=c*this.spiralLengthFactor/a,s.push(r);return s},l.V=function(e,t){var o,a,r,i,n,s,l,d,c;if((s=null!=e._omsData)&&this.keepSpiderfied||this.unspiderfy(),s||this.map.getStreetView().getVisible()||"GoogleEarthAPI"===this.map.getMapTypeId())return this.trigger("click",e,t);for(s=[],l=[],o=this.nearbyDistance,d=o*o,n=this.f(e.position),c=this.a,o=0,a=c.length;o<a;o++)r=c[o],null!=r.map&&r.getVisible()&&(i=this.f(r.position),this.i(i,n)<d?s.push({R:r,G:i}):l.push(r));return 1===s.length?this.trigger("click",e,t):this.W(s,l)},l.markersNearMarker=function(e,t){var o,a,r,i,n,s,l,d,c,p;if(null==t&&(t=!1),null==this.g.getProjection())throw"Must wait for 'idle' event on map before calling markersNearMarker";for(o=this.nearbyDistance,l=o*o,n=this.f(e.position),s=[],d=this.a,o=0,a=d.length;o<a&&(r=d[o],!(r!==e&&null!=r.map&&r.getVisible()&&(i=this.f(null!=(c=null!=(p=r._omsData)?p.v:void 0)?c:r.position),this.i(i,n)<l&&(s.push(r),t))));o++);return s},l.F=function(){var e,t,o,a,r,i,n,s,l,d,c,p;if(null==this.g.getProjection())throw"Must wait for 'idle' event on map before calling markersNearAnyOtherMarker";for(l=this.nearbyDistance,l*=l,r=this.a,p=[],d=0,t=r.length;d<t;d++)a=r[d],p.push({H:this.f(null!=(e=null!=(o=a._omsData)?o.v:void 0)?e:a.position),b:!1});for(d=this.a,e=o=0,a=d.length;o<a;e=++o)if(t=d[e],null!=t.getMap()&&t.getVisible()&&(i=p[e],!i.b))for(c=this.a,t=s=0,r=c.length;s<r;t=++s)if(n=c[t],t!==e&&null!=n.getMap()&&n.getVisible()&&(n=p[t],(!(t<e)||n.b)&&this.i(i.H,n.H)<l)){i.b=n.b=!0;break}return p},l.markersNearAnyOtherMarker=function(){var e,t,o,a,r,i,n;for(r=this.F(),i=this.a,n=[],e=t=0,o=i.length;t<o;e=++t)a=i[e],r[e].b&&n.push(a);return n},l.setImmediate=function(e){return window.setTimeout(e,0)},l.h=function(){if(!this.basicFormatEvents&&null==this.l)return this.l=this.setImmediate((e=this,function(){return e.l=null,null!=e.g.getProjection()?e.w():null!=e.B?void 0:e.B=t.addListenerOnce(e.map,"idle",function(){return e.w()})}));var e},l.w=function(){var e,t,o,a,r,i,n;if(this.basicFormatEvents){for(r=[],t=0,o=markers.length;t<o;t++)a=markers[t],e=null!=a._omsData?"SPIDERFIED":"UNSPIDERFIED",r.push(this.trigger("format",a,this.constructor.markerStatus[e]));return r}for(r=this.F(),i=this.a,n=[],e=o=0,t=i.length;o<t;e=++o)a=i[e],e=null!=a._omsData?"SPIDERFIED":r[e].b?"SPIDERFIABLE":"UNSPIDERFIABLE",n.push(this.trigger("format",a,this.constructor.markerStatus[e]));return n},l.P=function(e){return{m:(t=this,function(){return e._omsData.o.setOptions({strokeColor:t.legColors.highlighted[t.map.mapTypeId],zIndex:t.highlightedLegZIndex})}),u:function(t){return function(){return e._omsData.o.setOptions({strokeColor:t.legColors.usual[t.map.mapTypeId],zIndex:t.usualLegZIndex})}}(this)};var t},l.W=function(e,a){var r,i,n,s,l,d,c,p,m,u;return this.J=!0,u=e.length,r=this.T(function(){var t,o,a;for(a=[],t=0,o=e.length;t<o;t++)p=e[t],a.push(p.G);return a}()),s=u>=this.circleSpiralSwitchover?this.M(u,r).reverse():this.L(u,r),r=function(){var a,r,p;for(p=[],a=0,r=s.length;a<r;a++)n=s[a],i=this.U(n),m=this.S(e,function(e){return function(t){return e.i(t.G,n)}}(this)),c=m.R,d=new o.Polyline({map:this.map,path:[c.position,i],strokeColor:this.legColors.usual[this.map.mapTypeId],strokeWeight:this.legWeight,zIndex:this.usualLegZIndex}),c._omsData={v:c.getPosition(),X:c.getZIndex(),o:d},this.legColors.highlighted[this.map.mapTypeId]!==this.legColors.usual[this.map.mapTypeId]&&(l=this.P(c),c._omsData.O={m:t.addListener(c,"mouseover",l.m),u:t.addListener(c,"mouseout",l.u)}),this.trigger("format",c,this.constructor.markerStatus.SPIDERFIED),c.setPosition(i),c.setZIndex(Math.round(this.spiderfiedZIndex+n.y)),p.push(c);return p}.call(this),delete this.J,this.I=!0,this.trigger("spiderfy",r,a)},l.unspiderfy=function(e){var o,a,r,i,n,s,l;if(null==e&&(e=null),null==this.I)return this;for(this.K=!0,l=[],n=[],s=this.a,o=0,a=s.length;o<a;o++)i=s[o],null!=i._omsData?(i._omsData.o.setMap(null),i!==e&&i.setPosition(i._omsData.v),i.setZIndex(i._omsData.X),r=i._omsData.O,null!=r&&(t.removeListener(r.m),t.removeListener(r.u)),delete i._omsData,i!==e&&(r=this.basicFormatEvents?"UNSPIDERFIED":"SPIDERFIABLE",this.trigger("format",i,this.constructor.markerStatus[r])),l.push(i)):n.push(i);return delete this.K,delete this.I,this.trigger("unspiderfy",l,n),this},l.i=function(e,t){var o,a;return o=e.x-t.x,a=e.y-t.y,o*o+a*a},l.T=function(e){var t,a,r,i,n;for(t=i=n=0,a=e.length;t<a;t++)r=e[t],i+=r.x,n+=r.y;return e=e.length,new o.Point(i/e,n/e)},l.f=function(e){return this.g.getProjection().fromLatLngToDivPixel(e)},l.U=function(e){return this.g.getProjection().fromDivPixelToLatLng(e)},l.S=function(e,t){var o,a,r,i,n,s;for(r=n=0,s=e.length;n<s;r=++n)i=e[r],i=t(i),(null==o||i<a)&&(a=i,o=r);return e.splice(o,1)[0]},l.A=function(e,t){var o,a,r,i;if(null!=e.indexOf)return e.indexOf(t);for(o=a=0,r=e.length;a<r;o=++a)if(i=e[o],i===t)return o;return-1},e}(),t=/(\?.*(&|&amp;)|\?)spiderfier_callback=(\w+)/,e=document.currentScript,null==e&&(e=function(){var e,o,a,i,n;for(a=document.getElementsByTagName("script"),n=[],e=0,o=a.length;e<o;e++)r=a[e],null!=(i=r.getAttribute("src"))&&i.match(t)&&n.push(r);return n}()[0]),null!=e&&(e=null!=(o=e.getAttribute("src"))&&null!=(a=o.match(t))?a[3]:void 0)&&"function"==typeof window[e]&&window[e](),"function"==typeof window.spiderfier_callback&&window.spiderfier_callback()}).call(this),MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_PATH_="../images/m",MarkerClusterer.prototype.MARKER_CLUSTER_IMAGE_EXTENSION_="png",MarkerClusterer.prototype.extend=function(e,t){return function(e){for(var t in e.prototype)this.prototype[t]=e.prototype[t];return this}.apply(e,[t])},MarkerClusterer.prototype.onAdd=function(){this.setReady_(!0)},MarkerClusterer.prototype.draw=function(){},MarkerClusterer.prototype.setupStyles_=function(){if(!this.styles_.length)for(var e,t=0;e=this.sizes[t];t++)this.styles_.push({url:this.imagePath_+(t+1)+"."+this.imageExtension_,height:e,width:e})},MarkerClusterer.prototype.fitMapToMarkers=function(){for(var e,t=this.getMarkers(),o=new google.maps.LatLngBounds,a=0;e=t[a];a++)o.extend(e.getPosition());this.map_.fitBounds(o)},MarkerClusterer.prototype.setStyles=function(e){this.styles_=e},MarkerClusterer.prototype.getStyles=function(){return this.styles_},MarkerClusterer.prototype.isZoomOnClick=function(){return this.zoomOnClick_},MarkerClusterer.prototype.isAverageCenter=function(){return this.averageCenter_},MarkerClusterer.prototype.getMarkers=function(){return this.markers_},MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length},MarkerClusterer.prototype.setMaxZoom=function(e){this.maxZoom_=e},MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_},MarkerClusterer.prototype.calculator_=function(e,t){for(var o=0,a=e.length,r=a;0!==r;)r=parseInt(r/10,10),o++;return o=Math.min(o,t),{text:a,index:o}},MarkerClusterer.prototype.setCalculator=function(e){this.calculator_=e},MarkerClusterer.prototype.getCalculator=function(){return this.calculator_},MarkerClusterer.prototype.addMarkers=function(e,t){if(e.length)for(var o=0;a=e[o];o++)this.pushMarkerTo_(a);else if(Object.keys(e).length)for(var a in e)this.pushMarkerTo_(e[a]);t||this.redraw()},MarkerClusterer.prototype.pushMarkerTo_=function(e){if(e.isAdded=!1,e.draggable){var t=this;google.maps.event.addListener(e,"dragend",function(){e.isAdded=!1,t.repaint()})}this.markers_.push(e)},MarkerClusterer.prototype.addMarker=function(e,t){this.pushMarkerTo_(e),t||this.redraw()},MarkerClusterer.prototype.removeMarker_=function(e){var t=-1;if(this.markers_.indexOf)t=this.markers_.indexOf(e);else for(var o,a=0;o=this.markers_[a];a++)if(o==e){t=a;break}return-1!=t&&(e.setMap(null),this.markers_.splice(t,1),!0)},MarkerClusterer.prototype.removeMarker=function(e,t){var o=this.removeMarker_(e);return!(t||!o||(this.resetViewport(),this.redraw(),0))},MarkerClusterer.prototype.removeMarkers=function(e,t){for(var o,a=!1,r=0;o=e[r];r++){var i=this.removeMarker_(o);a=a||i}if(!t&&a)return this.resetViewport(),this.redraw(),!0},MarkerClusterer.prototype.setReady_=function(e){this.ready_||(this.ready_=e,this.createClusters_())},MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length},MarkerClusterer.prototype.getMap=function(){return this.map_},MarkerClusterer.prototype.setMap=function(e){this.map_=e},MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_},MarkerClusterer.prototype.setGridSize=function(e){this.gridSize_=e},MarkerClusterer.prototype.getMinClusterSize=function(){return this.minClusterSize_},MarkerClusterer.prototype.setMinClusterSize=function(e){this.minClusterSize_=e},MarkerClusterer.prototype.getExtendedBounds=function(e){var t=this.getProjection(),o=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng()),a=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng()),r=t.fromLatLngToDivPixel(o);r.x+=this.gridSize_,r.y-=this.gridSize_;var i=t.fromLatLngToDivPixel(a);i.x-=this.gridSize_,i.y+=this.gridSize_;var n=t.fromDivPixelToLatLng(r),s=t.fromDivPixelToLatLng(i);return e.extend(n),e.extend(s),e},MarkerClusterer.prototype.isMarkerInBounds_=function(e,t){return t.contains(e.getPosition())},MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport(!0),this.markers_=[]},MarkerClusterer.prototype.resetViewport=function(e){for(var t,o=0;t=this.clusters_[o];o++)t.remove();var a;for(o=0;a=this.markers_[o];o++)a.isAdded=!1,e&&a.setMap(null);this.clusters_=[]},MarkerClusterer.prototype.repaint=function(){var e=this.clusters_.slice();this.clusters_.length=0,this.resetViewport(),this.redraw(),window.setTimeout(function(){for(var t,o=0;t=e[o];o++)t.remove()},0)},MarkerClusterer.prototype.redraw=function(){this.createClusters_()},MarkerClusterer.prototype.distanceBetweenPoints_=function(e,t){if(!e||!t)return 0;var o=(t.lat()-e.lat())*Math.PI/180,a=(t.lng()-e.lng())*Math.PI/180,r=Math.sin(o/2)*Math.sin(o/2)+Math.cos(e.lat()*Math.PI/180)*Math.cos(t.lat()*Math.PI/180)*Math.sin(a/2)*Math.sin(a/2);return 2*Math.atan2(Math.sqrt(r),Math.sqrt(1-r))*6371},MarkerClusterer.prototype.addToClosestCluster_=function(e){for(var t,o=4e4,a=null,r=(e.getPosition(),0);t=this.clusters_[r];r++){var i=t.getCenter();if(i){var n=this.distanceBetweenPoints_(i,e.getPosition());n<o&&(o=n,a=t)}}a&&a.isMarkerInClusterBounds(e)?a.addMarker(e):((t=new Cluster(this)).addMarker(e),this.clusters_.push(t))},MarkerClusterer.prototype.createClusters_=function(){if(this.ready_)for(var e,t=new google.maps.LatLngBounds(this.map_.getBounds().getSouthWest(),this.map_.getBounds().getNorthEast()),o=this.getExtendedBounds(t),a=0;e=this.markers_[a];a++)!e.isAdded&&this.isMarkerInBounds_(e,o)&&this.addToClosestCluster_(e)},Cluster.prototype.isMarkerAlreadyAdded=function(e){if(this.markers_.indexOf)return-1!=this.markers_.indexOf(e);for(var t,o=0;t=this.markers_[o];o++)if(t==e)return!0;return!1},Cluster.prototype.addMarker=function(e){if(this.isMarkerAlreadyAdded(e))return!1;if(this.center_){if(this.averageCenter_){var t=this.markers_.length+1,o=(this.center_.lat()*(t-1)+e.getPosition().lat())/t,a=(this.center_.lng()*(t-1)+e.getPosition().lng())/t;this.center_=new google.maps.LatLng(o,a),this.calculateBounds_()}}else this.center_=e.getPosition(),this.calculateBounds_();e.isAdded=!0,this.markers_.push(e);var r=this.markers_.length;if(r<this.minClusterSize_&&e.getMap()!=this.map_&&e.setMap(this.map_),r==this.minClusterSize_)for(var i=0;i<r;i++)this.markers_[i].setMap(null);return r>=this.minClusterSize_&&e.setMap(null),this.updateIcon(),!0},Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_},Cluster.prototype.getBounds=function(){for(var e,t=new google.maps.LatLngBounds(this.center_,this.center_),o=this.getMarkers(),a=0;e=o[a];a++)t.extend(e.getPosition());return t},Cluster.prototype.remove=function(){this.clusterIcon_.remove(),this.markers_.length=0,delete this.markers_},Cluster.prototype.getSize=function(){return this.markers_.length},Cluster.prototype.getMarkers=function(){return this.markers_},Cluster.prototype.getCenter=function(){return this.center_},Cluster.prototype.calculateBounds_=function(){var e=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(e)},Cluster.prototype.isMarkerInClusterBounds=function(e){return this.bounds_.contains(e.getPosition())},Cluster.prototype.getMap=function(){return this.map_},Cluster.prototype.updateIcon=function(){var e=this.map_.getZoom(),t=this.markerClusterer_.getMaxZoom();if(t&&e>t)for(var o,a=0;o=this.markers_[a];a++)o.setMap(this.map_);else if(this.markers_.length<this.minClusterSize_)this.clusterIcon_.hide();else{var r=this.markerClusterer_.getStyles().length,i=this.markerClusterer_.getCalculator()(this.markers_,r);this.clusterIcon_.setCenter(this.center_),this.clusterIcon_.setSums(i),this.clusterIcon_.show()}},ClusterIcon.prototype.triggerClusterClick=function(){var e=this.cluster_.getMarkerClusterer();google.maps.event.trigger(e,"clusterclick",this.cluster_),e.isZoomOnClick()&&this.map_.fitBounds(this.cluster_.getBounds())},ClusterIcon.prototype.onAdd=function(){if(this.div_=document.createElement("DIV"),this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.className="cluster-icon cluster-icon-sum-"+this.sums_.text+" cluster-icon-range-"+this.index_,this.div_.style.cssText=this.createCss(e),this.div_.innerHTML=this.sums_.text}this.getPanes().overlayMouseTarget.appendChild(this.div_);var t=this;google.maps.event.addDomListener(this.div_,"click",function(){t.triggerClusterClick()})},ClusterIcon.prototype.getPosFromLatLng_=function(e){var t=this.getProjection().fromLatLngToDivPixel(e);return t.x-=parseInt(this.width_/2,10),t.y-=parseInt(this.height_/2,10),t},ClusterIcon.prototype.draw=function(){if(this.visible_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.top=e.y+"px",this.div_.style.left=e.x+"px"}},ClusterIcon.prototype.hide=function(){this.div_&&(this.div_.style.display="none"),this.visible_=!1},ClusterIcon.prototype.show=function(){if(this.div_){var e=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(e),this.div_.style.display=""}this.visible_=!0},ClusterIcon.prototype.remove=function(){this.setMap(null)},ClusterIcon.prototype.onRemove=function(){this.div_&&this.div_.parentNode&&(this.hide(),this.div_.parentNode.removeChild(this.div_),this.div_=null)},ClusterIcon.prototype.setSums=function(e){this.sums_=e,this.text_=e.text,this.index_=e.index,this.div_&&(this.div_.innerHTML=e.text),this.useStyle()},ClusterIcon.prototype.useStyle=function(){var e=Math.max(0,this.sums_.index-1);e=Math.min(this.styles_.length-1,e);var t=this.styles_[e];this.url_=t.url,this.height_=t.height,this.width_=t.width,this.textColor_=t.textColor,this.anchor_=t.anchor,this.textSize_=t.textSize,this.backgroundPosition_=t.backgroundPosition},ClusterIcon.prototype.setCenter=function(e){this.center_=e},ClusterIcon.prototype.createCss=function(e){var t=[];t.push("background-image:url("+this.url_+");"),t.push("background-repeat: no-repeat;");var o=this.backgroundPosition_?this.backgroundPosition_:"center";t.push("background-position:"+o+";"),"object"==typeof this.anchor_?("number"==typeof this.anchor_[0]&&this.anchor_[0]>0&&this.anchor_[0]<this.height_?t.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;"):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px;"),"number"==typeof this.anchor_[1]&&this.anchor_[1]>0&&this.anchor_[1]<this.width_?t.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;"):t.push("width:"+this.width_+"px; text-align:center;")):t.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;");var a=this.textColor_?this.textColor_:"black",r=this.textSize_?this.textSize_:11;return t.push("cursor:pointer; top:"+e.y+"px; left:"+e.x+"px; color:"+a+"; position:absolute; font-size:"+r+"px; font-family:Arial,sans-serif; font-weight:bold"),t.join("")},function(){function e(e,t){e=(e.title||"").trim(),t=(t.title||"").trim();var o=[],a=[];for(e.replace(/(\d+)|(\D+)/g,function(e,t,a){o.push([t||1/0,a||""])}),t.replace(/(\d+)|(\D+)/g,function(e,t,o){a.push([t||1/0,o||""])});o.length&&a.length;){var r=o.shift(),i=a.shift(),n=r[0]-i[0]||r[1].localeCompare(i[1]);if(n)return n}return o.length-a.length}function t(e){var t=document.createElement("textarea");return t.innerHTML=e,t.value}function o(e,t){for(var a in t)t.hasOwnProperty(a)&&(e[a]&&"object"==typeof t[a]?o(e[a],t[a]):e[a]=t[a]);return e}function a(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var o=document.createEvent("CustomEvent");return o.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),o}if("function"==typeof window.CustomEvent)return!1;e.prototype=window.Event.prototype,window.CustomEvent=e}function r(e){var t=e?new Date(e).toISOString():(new Date).toISOString();return t.split(".")[0].substring(0,15).replace(/\:/g,"-")}function i(e){return e&&0==e.indexOf("/")&&(e=e.substr(1)),e}function n(e){try{var t=window.localStorage;e=e.replace(/\//g,"")+"_json";var o=e+"_expires";if(!e||!t)return!1;try{var a=t.getItem(o);if(a){a=parseInt(a);var r=(new Date).getTime();if(r>a)return!1;var i=JSON.parse(t.getItem(e));return i}return!1}catch(e){return console.log(e),!1}}catch(e){return console.log(e),!1}}function s(e,t,o,a){try{var r=window.localStorage,i=t;t=t.replace(/\//g,"")+"_json";var n=t+"_expires";if(a=a||10,e&&r){var s=(new Date).getTime()+6e4*a,l={};if(l=JSON.stringify(e),l.length){i.indexOf("/")>-1&&r.getItem(i)&&r.removeItem(i);try{r.setItem(t,l)}catch(a){if(console.log(a.message||a),!o&&e&&e.items&&e.items.length)for(var d=e.items.length-1;d>=0;d--)e.items[d].body&&(e.items[d].body="y");l=JSON.stringify(e);try{r.setItem(t,l),console.log("Items body was reduced to fit localStorage quota")}catch(e){console.log(e.message||e,"Still too heavy collection to save local.")}}r.setItem(n,s)}}}catch(e){console.log(e)}}function l(e,t,o,a,i){var n=function(){var t=window.location.hostname.replace(/\./g,"-")+"_"+o+"_map-"+e;s({saved:!0,minutes:a.cacheTime,timestamp:(new Date).getTime()},t,!0,a.cacheTime)};if(i)n();else{if(a&&a.removeFields&&a.removeFields.length&&(a.removeFields=(a.removeFields+"").split(","),t.length&&t[0]&&t[0].id&&(t={items:t}),t&&t.items&&t.items.length))for(var l=t.items.length-1;l>=0;l--)if(t.items[l].postItemInjectCode&&delete t.items[l].postItemInjectCode,a.removeFields.forEach(function(e){e=e.trim(),"body"!=e||!t.items[l].recordTypeLabel||"image"!=t.items[l].recordTypeLabel&&"video"!=t.items[l].recordTypeLabel||(e="excerpt"),t.items[l].hasOwnProperty(e)&&delete t.items[l][e]}),t.items[l].items&&t.items[l].items.length&&a.removeFields.indexOf("internalImages")>-1)for(var d=t.items[l].items.length-1;d>=0;d--)t.items[l].items[d]={assetUrl:t.items[l].items[d].assetUrl,systemDataId:t.items[l].items[d].systemDataId,id:t.items[l].items[d].id,originalSize:t.items[l].items[d].originalSize||"",parentId:t.items[l].items[d].parentId};var c=window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.website&&window.Static.SQUARESPACE_CONTEXT.website.baseUrl||window.location.origin;t.timestamp=r(),t.nestedCategories&&t.nestedCategories.categoriesHash;var p=JSON.stringify({url:c+"/map"+decodeURIComponent(e),content:t,timestamp:r()});console.log("Size to save: ",(p.length/1048576).toFixed(2)+"MB"),Y.io("https://tools.squarewebsites.org/api/save-sqs-response/"+o+"/",{headers:{"Content-Type":"application/json;charset=UTF-8"},method:"POST",data:p,on:{success:function(e,t){t&&t.responseText&&(t=JSON.parse(t.responseText),t.success&&t.file_saved&&n())},failure:function(e){console.log(e)}}})}}function d(e,t,o,a){0==e.indexOf("/")&&(e=e.substr(1));var n=window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.website&&window.Static.SQUARESPACE_CONTEXT.website.baseUrl&&new URL(window.Static.SQUARESPACE_CONTEXT.website.baseUrl)||window.location,s="https://tools.squarewebsites.org/sqs-response/"+n.hostname.replace(/\./g,"-")+"/"+t+"/map-"+(i(decodeURIComponent(e)).replace("?","--query--").replace(/[^A-Za-z0-9-]+/g,"-")||"-")+".js";return!o||!o.saved||o&&o.minutes&&o.minutes!=a.cacheTime||!a.cacheTime?s+="?ver="+r():o&&o.timestamp&&(s+="?ver="+r(o.timestamp)),new Y.Promise(function(e,t){Y.io(s,{headers:{"Content-Type":"application/json;charset=UTF-8"},on:{success:function(o,a){if(a&&a.responseText)try{e(JSON.parse(a.responseText))}catch(e){t("server malformed response")}else t("server empty response")},failure:function(){t("server")}}})})}function m(e,t){var o=[],a=t.length,r=e.enableCollectionFilter&&e.collectionFilter&&(e.collectionFilter.featured||e.collectionFilter.category||e.collectionFilter.tag);if(r){for(var i=0;i<a;i++){var n=t[i],s=-1;e.collectionFilter.featured&&(n.starred?s++:s--),e.collectionFilter.category&&(n.categories&&n.categories.indexOf(e.collectionFilter.category)>-1?s++:s--),e.collectionFilter.tag&&(n.tags&&n.tags.indexOf(e.collectionFilter.tag)>-1?s++:s--),s>-1&&o.push(n)}return o}return t}function u(e,t,o,a){var r=function(){var r;r=new XMLHttpRequest,r.onreadystatechange=function(){4==r.readyState&&200==r.status&&(a(r.responseText),t&&s({map_data:r.responseText},decodeURIComponent(e.replace("https://tools.squarewebsites.org/api/gss-html/?url=",""))))};var i=o?"cache="+((new Date).getTime()+"").substr(0,8):"";i&&(i=e.indexOf("?")>-1?"&"+i:"?"+i),r.open("GET",e+i,!0),r.send()};if(t){var i=decodeURIComponent(e.replace("https://tools.squarewebsites.org/api/gss-html/?url=","")),l=n(i);l?(l=l.map_data||l,a(l)):r()}else r()}function g(e,t,o){var a={enabled:o.useSQSProxy,cacheTime:o.proxyCacheTime||10,removeFields:o.proxyRemoveFields||"publicCommentCount,items,commentCount,commentState,author,body,variants,digitalGoods,salePriceCents,salePriceMoney,priceMoney,priceCents,isSubscribable,onSale,variantOptionOrdering,additionalFieldsForm,additionalFieldsFormId,authorId,internalImages,contentType,customAddButtonText,useCustomAddButtonText,unsaved,systemDataVariants,systemDataSourceType,pendingPushedServices,pushedServices,displayIndex"};o&&(o.showExcerpt||-1!=a.removeFields.indexOf("excerpt")||(a.removeFields+=",excerpt"));return new Promise(function(i){function c(e,n){var d=e.indexOf("?")>-1?"&format=json":"?format=json";d+="&cache="+r(),n&&(d+="&offset="+n),o.isEventsCollection&&(d+="&view=list"),Y.io(e+d,{on:{success:function(r,d){var m=d.responseText;if(m)try{var u=JSON.parse(m),g=!!u.upcoming||!!u.past||!!u.items;g&&(o.eventsFactor&&"all"!==o.eventsFactor&&(u.upcoming||u.past)?p="upcoming"==o.eventsFactor?p.concat(u.upcoming):p.concat(u.past):(u.upcoming&&(p=p.concat(u.upcoming)),u.past&&(p=p.concat(u.past)),u.items&&(p=p.concat(u.items))));n=u.offset&&u.offset!==n?u.offset:u.pagination&&u.pagination.nextPageOffset&&n!==u.pagination.nextPageOffset?u.pagination.nextPageOffset:"",n?(o.__all_loaded=!1,c(e,n)):(o.__all_loaded=!0,u.nestedCategories&&u.nestedCategories.categories.length&&u.nestedCategories.categories[0].id&&(console.log("we have categories ids there!!"),p.nestedCategories=u.nestedCategories,regenerateAllowedStructure(u.nestedCategories)),a.enabled&&l(e,p,"json",a,!1),t&&!a.enabled&&s(p,e,!1),i(p))}catch(e){console.warn("error : "+e),i(p)}else i(p)},failure:function(e,t){console.warn("error : "+t.status),i(p)}}})}var p=[],m=e,u=function(){var r=n(m);if(r&&t&&!a.enabled){if(o.__all_loaded=!0,o.processDataFunction&&"function"==typeof o.processDataFunction){var s=o.processUrl||o.originalCollectionUrl;r=o.processDataFunction(r,s)}i(r)}else c(e)};if(a&&a.enabled){var g="json",h=window.location.hostname.replace(/\./g,"-")+"_"+g+"_map-"+e,f=n(h);d(e,g,f,a).then(function(e){var t=e.items&&e.items.length;i(e),!0,(e.nestedCategories&&window.self!=window.top||!t||!f||!f.saved||f&&f.minutes&&f.minutes!=a.cacheTime||!a.cacheTime)&&u()}).catch(function(e){console.log(e),u()})}else u()})}function h(e,t,o,a){if(o=o||document.getElementsByTagName("head")[0],t&&document.getElementById(t))return!1;var r=document.createElement("link");r.id=t,r.href=e,r.rel="stylesheet",r.onload=function(){a&&a(null,{nodes:[this]})},o.appendChild(r)}function w(e,t){var o={markerLat:40.7207559,markerLng:-74.00076130000002},a=null;if(t.customMapLocation)try{var r=JSON.parse(t.customMapLocation);r&&r.mapLat&&(a={markerLat:r.mapLat,markerLng:r.mapLng})}catch(e){console.log(e)}else e&&e.length&&e.forEach(function(e){a||(e.location&&e.location.markerLat||e.location&&e.location.mapLat||e.markerLat&&e.markerLng)&&(a={markerLat:e.markerLat||e.location.markerLat||e.location.mapLat,markerLng:e.markerLng||e.location.markerLng||e.location.mapLng})});return a&&(o=a),o}function y(e){var t=e.location&&"object"==typeof e.location?e.location:e,o=void 0;return t?(t.addressLine1||t.addressLine2?(o=(t.addressLine1||"")+" "+(t.addressLine2||""),t.addressCountry&&(o+=", "+t.addressCountry)):o=t.markerLat+","+t.markerLng,o):""}function v(e){for(var t={},o=("?"===e[0]?e.substr(1):e).split("&"),a=0;a<o.length;a++){var r=o[a].split("=");t[decodeURIComponent(r[0])]=decodeURIComponent(r[1]||"")}return t}function k(e){var t=document.createElement("div");return t.innerHTML=e.trim(),t}function _(){return window.Static&&window.Static.SQUARESPACE_CONTEXT.website.timeZoneOffset+6e4*(new Date).getTimezoneOffset()||0}function M(e,t){var o="";return t&&(e.startDate?(o+='<div class="short-date short-start-date">'+new Date(e.startDate).toLocaleDateString(),o+=' - <span class="short-time"><span class="event-time-start" datetime="'+e.startDate+_()+'">'+new Date(e.startDate+_()).toLocaleTimeString([],{timeStyle:"short"})+"</span></span></div>",e.endDate&&(o+='<div class="short-date short-end-date">'+new Date(e.endDate).toLocaleDateString(),o+=' - <span class="short-time"><span class="event-time-end" datetime="'+e.endDate+_()+'">'+new Date(e.endDate+_()).toLocaleTimeString([],{timeStyle:"short"})+"</span></span></div>")):o+='<div class="short-date">'+new Date(e.publishOn).toLocaleString()+"</div>"),o}function b(e,t,o){window.__dates_by_urls||(window.__dates_by_urls={}),window.__dates_by_urls[e]&&document.querySelector('.info-marker-date[data-url="'+e+'"]')?(t.append(window.__dates_by_urls[e]),t.setAttribute("date-set",!0),window.advancedMapHooks&&(window.advancedMapHooks[o]&&window.advancedMapHooks[o].dateSet&&"function"==typeof window.advancedMapHooks[o].dateSet?window.advancedMapHooks[o].dateSet(t):window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].dateSet&&"function"==typeof window.advancedMapHooks["*"].dateSet&&window.advancedMapHooks["*"].dateSet(t))):u(e+"?format=main-content",!1,!0,function(a){if(a.length)try{var r=k(a),i=r.querySelector(".event-meta-date-time-container");i&&document.querySelector('.info-marker-date[data-url="'+e+'"]')&&!t.one(".event-meta-date-time-container")&&(t.append(i),t.setAttribute("date-set",!0)),i&&(window.__dates_by_urls[e]=i.outerHTML),window.advancedMapHooks&&(window.advancedMapHooks[o]&&window.advancedMapHooks[o].dateSet&&"function"==typeof window.advancedMapHooks[o].dateSet?window.advancedMapHooks[o].dateSet(t):window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].dateSet&&"function"==typeof window.advancedMapHooks["*"].dateSet&&window.advancedMapHooks["*"].dateSet(t))}catch(e){console.log(e)}else console.log("Seems like empty response.")})}function I(o,a){if(o.runningMapInit,G&&o){var r=function(r){var i=o.__blockId;if(o.runningMapInit)return console.log("Already running init"),void o.addClass("inited");o.runningMapInit=!0,window.advancedMapHooks&&(window.advancedMapHooks[i]&&window.advancedMapHooks[i].itemsData&&"function"==typeof window.advancedMapHooks[i].itemsData?r=window.advancedMapHooks[i].itemsData(r)||r:window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].itemsData&&"function"==typeof window.advancedMapHooks["*"].itemsData&&(r=window.advancedMapHooks["*"].itemsData(r)||r));try{if(r&&r.length&&o){if(r[0]&&r[0].id)for(var n=[],s=r.length-1;s>=0;s--)-1==n.indexOf(r[s].id)?n.push(r[s].id):r.splice(s,1);var l=!1;if(o._node._map_config=a,o._node._map_data=r,window.customMapBuildHook&&"function"==typeof window.customMapBuildHook&&(l=window.customMapBuildHook(o,a,r)),l)console.log("customBuildHook defined and returned true");else{var d,c=w(r,a),p=new G.LatLng(parseFloat(c.markerLat),parseFloat(c.markerLng)),m=[],u=U(o,!1,a),g=o.ancestor(".sqs-block-map")||o.ancestor("[data-map-json]");a.showTitle?g.addClass("info-window-show-title"):g.removeClass("info-window-show-title"),a.showLocationInfo?g.addClass("info-window-show-location"):g.removeClass("info-window-show-location"),a.showExcerpt?g.addClass("info-window-show-excerpt"):g.removeClass("info-window-show-excerpt"),a.showDate?g.addClass("info-window-show-date"):g.removeClass("info-window-show-date"),a.showImage?g.addClass("info-window-show-image"):g.removeClass("info-window-show-image"),a.showCats?g.addClass("info-window-show-cats"):g.removeClass("info-window-show-cats"),a.showTags?g.addClass("info-window-show-tags"):g.removeClass("info-window-show-tags"),a.hasOwnProperty("mapPositionFactor")&&!a.fitBounds||(a.mapPositionFactor="fitBounds"),a.hasOwnProperty("followMapPositionSet")||(a.followMapPositionSet=!0),o.addClass("inited");var h={cameraControl:a.controls,rotateControl:a.controls,fullscreenControl:a.controls,labels:a.labels,zoomControl:a.controls,scaleControl:a.controls,mapTypeControl:a.controls,streetViewControl:a.controls,gestureHandling:a.gestureHandling||"auto"};o._node.__map&&o._node.classList.contains("sqs-block-website-component-content")&&(o._node.innerHTML="",o._node.__map=o._node._markers=o._node._markersObj=o._node._mapBound=o._node.__e3_=null),d=o._node.__map&&o._node.__map instanceof G.Map&&o._node.__map||new G.Map(o._node),d&&d.clearMarkers&&d.clearMarkers();var f=[1,21];a.minMaxZoom&&a.minMaxZoom.length&&a.minMaxZoom.indexOf("|")>-1&&(f=a.minMaxZoom.trim().split("|"));var k=a.satellite&&a.labels&&3!==a.style?G.MapTypeId.HYBRID:u.ui.style&&(u.ui.style.satellite||3==a.style)?G.MapTypeId.SATELLITE:a.terrain?G.MapTypeId.TERRAIN:G.MapTypeId.ROADMAP;d.setOptions({zoom:a.zoomControl||a.location.mapZoom||12,center:p,maxZoom:parseInt(f[1]),minZoom:parseInt(f[0]),mapTypeId:k,clickableIcons:!a.disablePOIClick}),u&&u.ui&&(u.ui.mapTypeId&&(u.ui.mapTypeId=k),d.setOptions({styles:u.ui.style.colors})),d.setOptions(h),g&&(g.mapDragEvent&&G.event.removeListener(g.mapDragEvent),g.mapDragEvent=G.event.addListener(d,"dragend",function(){g.fire("map_drag",d)})),o._node.__map=d;var _=new G.LatLngBounds;u.ui&&u.ui.style&&(u=u.ui.style);var I=a.markerImgScale<3.1?a.markerImgScale:a.markerImgScale&&a.markerImgScale/100<4?a.markerImgScale/100:1;a["marker-image"]&&a["marker-image"].getAttrs?(a["marker-image"]={originalSize:a["marker-image"].get("originalSize"),id:a["marker-image"].get("id"),assetUrl:a["marker-image"].get("assetUrl")},a["marker-image"].originalSize&&(a["marker-image"].height=a["marker-image"].originalSize.split("x")[1],a["marker-image"].width=a["marker-image"].originalSize.split("x")[0])):a.markerImage;var C=a["marker-image"]&&a["marker-image"].width?a["marker-image"].width*I:a.markerImageWidth?a.markerImageWidth*I:u.marker&&u.marker.naturalWidth?u.marker.naturalWidth*I:64,S=a["marker-image"]&&a["marker-image"].height?a["marker-image"].height*I:a.markerImageHeight?a.markerImageHeight*I:u.marker&&u.marker.naturalHeight?u.marker.naturalHeight*I:64,T=new G.Size(C/2,S/2),x=a["marker-image"]&&a["marker-image"].asset?a["marker-image"].asset.assetUrl:a["marker-image"]&&a["marker-image"].assetUrl?a["marker-image"].assetUrl:a.markerImage?a.markerImage:u.marker?u.marker.imgUrl:"/universal/images-v6/icons/cover-pages-map-marker-pin-dark-2x.png",L=a.showMarkerLabel&&"no"!=a.showMarkerLabel,O=L&&a.showMarkerLabel;L&&(o.removeClass("marker-label-position-top"),o.removeClass("marker-label-position-bottom"),o.removeClass("marker-label-position-no"),o.addClass("marker-label-position-"+O));O&&"bottom"==O?new google.maps.Point(0,0):O&&"top"==O?new google.maps.Point(-C/2,-12):new google.maps.Point(0,0);var A={customIcon:!0,url:x,scaledSize:T},E=a.markerInfoWidth||360;o._node._markersObj={},a.showUserLocation&&"none"!==a.showUserLocation&&(o.one(".custom-locator-control")||D(d,a.showUserLocation));var H=a.markerInfoFactor,P=a.markerClickable,N=a.buildInfoOutside,z=a.placeOutside&&"bottom top left right relative".indexOf(a.placeOutside)>-1?a.placeOutside:a.placeOutside&&Y.one(a.placeOutside),F=a.popupPosition||"top",B={top:new G.Size(0,0),left:new G.Size(E,E/2),bottom:new G.Size(0,E/1.5),right:new G.Size(-E,E/2)},q=(B[F],o);q.setAttribute("data-popup-position",F);var R=N&&z&&z._node?z.one(".custom-maps-outside-markers-info"):N&&q.one(".custom-maps-outside-markers-info"),W=!1;if(!N){var j=g.one(".custom-maps-outside-markers-info");j&&j.remove()}if(E&&g.getAttribute("id")){var Z="@media screen and (min-width:"+(E+120)+"px){#"+g.getAttribute("id")+" .gm-style-iw-d {width:"+E+"px}}";g.one(".info-width-style")&&g.one(".info-width-style").remove(),g.append('<style class="info-width-style">'+Z+"</style>")}if(!R){j=g.one(".custom-maps-outside-markers-info");j&&j.remove(),R=Y.Node.create('<div class="custom-maps-outside-markers-info"><a href="#" class="close-button" style="position:absolute;max-width:32px;max-height:32px;overflow:hidden;display: inline-block"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 47.971 47.971"><path d="M28.228 23.986L47.092 5.122a2.998 2.998 0 0 0 0-4.242 2.998 2.998 0 0 0-4.242 0L23.986 19.744 5.121.88a2.998 2.998 0 0 0-4.242 0 2.998 2.998 0 0 0 0 4.242l18.865 18.864L.879 42.85a2.998 2.998 0 1 0 4.242 4.241l18.865-18.864L42.85 47.091c.586.586 1.354.879 2.121.879s1.535-.293 2.121-.879a2.998 2.998 0 0 0 0-4.242L28.228 23.986z"/></svg></a><div class="outside-container"></div></div>')}R&&R.setAttribute("hidden","hidden").setStyle("display","none"),R&&z&&z.length&&"bottom top left right relative".indexOf(z)>-1&&(R.setAttribute("data-position",z),"relative"!==z?R.setStyle("position","absolute"):R.setStyle("position","relative")),R&&(W=R.one(".outside-container"),W.empty(),R.__closeListener||(R.__closeListener=R.delegate("click",function(e){e.preventDefault(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),R.removeClass("show-panel-info").removeClass("active-marker-info"),o._node._closeInfo()},".close-button"),R.__backListener=R.delegate("click",function(e){e.preventDefault(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation();var t=e.currentTarget.ancestor&&e.currentTarget.ancestor(".outside-marker-info")||Y.one(e.currentTarget)&&Y.one(e.currentTarget).ancestor&&Y.one(e.currentTarget).ancestor(".outside-marker-info");t&&t.removeClass("marker-activated"),R.removeClass("active-marker-info"),o._node._closeInfo()},".info-back"),R.__titleListener=R.delegate("click",function(e){var t=e.currentTarget.ancestor(".outside-marker-info");if(t&&!t.hasClass("marker-activated")){e.preventDefault(),e.stopImmediatePropagation&&e.stopImmediatePropagation(),e.stopPropagation&&e.stopPropagation(),t.addClass("marker-activated"),R.addClass("active-marker-info");var r=e.currentTarget.ancestor(".outside-marker-item")&&e.currentTarget.ancestor(".outside-marker-item").getAttribute("data-item-id");if(r){var n=o._node._markersObj&&o._node._markersObj["marker-"+r];n&&n.openInfo&&n.openInfo()}t.all("img[data-source]").each(function(e){var t=e.getAttribute("data-source");e.setAttribute("src",t),e.removeAttribute("data-source")});var s=t.one(".info-marker-date");s&&s.getAttribute("data-url")&&!s.getAttribute("date-set")&&"slow"==a.dateWay&&b(s.getAttribute("data-url"),s,i)}},".info-marker-title a"))),N&&R&&r.sort(e);var V=null;a.omsEnable&&(V=new OverlappingMarkerSpiderfier(d,{markersWontMove:!0,markersWontHide:!1,basicFormatEvents:!0,nearbyDistance:2,circleFootSeparation:50})),r=r.reverse();for(var J=0,X=r.length;J<X;J++){var Q=r[J];Q.position=Q.location&&Q.location.markerLat&&40.7207559!=Q.location.markerLat?{lat:Q.location.markerLat,lng:Q.location.markerLng}:Q.location&&Q.location.mapLat&&40.73712648134702!==Q.location.mapLat?{lat:Q.location.mapLat,lng:Q.location.mapLng}:!!Q.markerLat&&{lat:Q.markerLat,lng:Q.markerLng},Q.location&&Q.location.markerLat&&(40.7207559==Q.location.markerLat||40.73712648134702==Q.location.mapLat)&&console.log("Item "+Q.title+" has default coordinates only.",Q.location),window.advancedMapHooks&&(window.advancedMapHooks[i]&&window.advancedMapHooks[i].itemJSON&&"function"==typeof window.advancedMapHooks[i].itemJSON?Q=window.advancedMapHooks[i].itemJSON(Q)||Q:window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].itemJSON&&"function"==typeof window.advancedMapHooks["*"].itemJSON&&(Q=window.advancedMapHooks["*"].itemJSON(Q)||Q)),Q.position&&Q.position.lat&&Q.position.lng&&40.7207559!=Q.position.lat&&-74.00076130000002!=Q.position.lng&&40.720882!=Q.position.lat&&-74.000988!=Q.position.lng?function(e){var r=new G.LatLng(e.position.lat,e.position.lng);e.id||(e.id=J+1),e.categories=e.categories&&"string"==typeof e.categories?e.categories.split(","):e.categories,e.tags=e.tags&&"string"==typeof e.tags?e.tags.split(","):e.tags,_.extend(r);var n={position:r,data:e,title:e.title,categories:e.categories,tags:e.tags,id:e.id,optimized:0!=a.useOptimizedMarkers};a.markersAnimation&&"NONE"!==a.markersAnimation&&(n.animation=G.Animation[a.markersAnimation]),L&&(n.label={color:a.markerLabelColor,fontSize:a.markerLabelFontSize+"px",className:"marker-label",text:e.title});var s=new G.Marker(n);G.event.addListener(s,"visible_changed",function(e){var t=s.getVisible();!t&&s.infoWindow&&s.infoWindow.close()});var l=null;e.tags&&e.tags.length&&u.tagsMarkers?e.tags.forEach(function(e){u.tagsMarkers[e]&&u.tagsMarkers[e].imgUrl&&(l={customIcon:!0,tagMarker:!0,url:u.tagsMarkers[e].imgUrl,scaledSize:u.tagsMarkers[e].naturalHeight&&u.tagsMarkers[e].naturalWidth?new G.Size(u.tagsMarkers[e].naturalWidth/2,u.tagsMarkers[e].naturalHeight/2):T},s.setIcon(l))}):e.categories&&e.categories.length&&u.catsMarkers&&e.categories.forEach(function(e){u.catsMarkers[e]&&u.catsMarkers[e].imgUrl&&(l={customIcon:!0,categoryMarker:!0,url:u.catsMarkers[e].imgUrl,scaledSize:u.catsMarkers[e].naturalHeight&&u.catsMarkers[e].naturalWidth?new G.Size(u.catsMarkers[e].naturalWidth/2,u.catsMarkers[e].naturalHeight/2):T},s.setIcon(l))}),l||A.url&&s.setIcon(A),null==V&&(a.markersAnimation&&"NONE"!==a.markersAnimation&&a.markersAnimationStagger?setTimeout(function(){s.setMap(d)},a.markersAnimationStagger*(J+1)):s.setMap(d));var c=e.clickthroughUrl||e.sourceUrl||e.fullUrl||e.url||"#";a.respectSourceUrlCheckbox&&e.sourceUrl&&(c=e.passthrough?e.sourceUrl:e.clickthroughUrl||e.fullUrl||e.url||"#"),0==c.indexOf("www.")&&0!==c.indexOf("http")&&-1===c.indexOf("//")&&(c="https://"+c);var p=c&&oe(c)?'target="_blank" rel="no-opener"':'rel="no-opener"';e.imageUrl&&(e.systemDataId=!0,e.assetUrl=e.imageUrl);var g="120",h="",f=e.systemDataId?e:!e.systemDataId&&e.items&&e.items[0]&&e.items&&e.items[0].systemDataId?e.items[0]:"";if(f.originalSize&&f.originalSize.indexOf("x")>-1){var w=f.originalSize.split("x"),v=w[0]/w[1];h=v,g=Math.ceil((E-8)/v)}f&&f.assetUrl&&-1==f.assetUrl.indexOf("images.squarespace")&&f.assetUrl.indexOf("squarespace")>-1&&(f.assetUrl=f.assetUrl.indexOf("?")>-1?f.assetUrl+"&format=500w":f.assetUrl+"?format=500w");var k=e.clickthroughUrl||e.sourceUrl,I=k&&oe(k)?'target="_blank" rel="no-opener"':"";if(P&&"click"!==H&&G.event.addListener(s,"click",function(){if(c){var e=Y.Node.create("<a "+p+' href="'+c+'"></a>');Y.one("body").append(e),e.simulate("click"),setTimeout(function(){e.remove()},100)}}),H||N){var C=!f.systemDataId||e.clickthroughUrl||e.sourceUrl?f.systemDataId&&(e.clickthroughUrl||e.sourceUrl)?'<div class="info-marker-image"><a '+I+' href="'+c+'"><img data-aspect="'+h+'" style="min-height:'+g+'px" data-source="'+f.assetUrl+'"/></a></div>':"":'<div class="info-marker-image"><img data-aspect="'+h+'" style="min-height:'+g+'px" data-source="'+f.assetUrl+'"/></div>',S='<div class="info-marker-title"><span class="info-back" style="max-width:64px"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 268.833 268.833"><path d="M256.333 121.916H42.679l58.659-58.661c4.882-4.882 4.882-12.796 0-17.678-4.883-4.881-12.797-4.881-17.678 0l-79.998 80c-4.883 4.882-4.883 12.796 0 17.678l80 80c2.439 2.439 5.64 3.661 8.839 3.661s6.397-1.222 8.839-3.661c4.882-4.882 4.882-12.796 0-17.678l-58.661-58.661h213.654c6.903 0 12.5-5.598 12.5-12.5 0-6.903-5.597-12.5-12.5-12.5z"/></svg></span><a '+p+' href="'+c+'">'+(e.title||e.location&&e.location.addressTitle||N&&R&&y(e)||"")+"</a></div>",x=e.categories&&e.categories[0]?('<div class="info-marker-cats">'+e.categories+"</div>").replace(/\,/g,", "):"",O=e.tags&&e.tags[0]?('<div class="info-marker-tags">'+e.tags+"</div>").replace(/\,/g,", "):"",D=e.excerpt?e.excerpt:"image"!==e.recordTypeLabel&&"video"!==e.recordTypeLabel||!e.body?"":e.body;D&&D.indexOf("&amp;")>-1&&(D=t(D));var U=D?'<div class="info-marker-descr">'+D+"</div>":"",B=e.startDate&&a.showDate?'<div class="info-marker-date" data-url="'+e.fullUrl+'">'+M(e,a.dateWay&&"slow"!==a.dateWay||!a.dateWay)+"</div>":"",q='<div class="info-marker-location">'+y(e)+"</div>",j='<div class="custom-maps-info-window" data-item-id="'+e.id+'"><div class="custom-maps-info-wrapper">'+S+B+C+q+x+O+U+"</div></div>",Z='<div class="custom-maps-info-window" data-item-id="'+e.id+'">'+S.replace('class="info-marker-title"','class="info-marker-title title-only"')+"</div>",X={title:S,image:C,categories:x,tags:O,description:U,location:q,url:c,date:B,click_url:k};window.advancedMapHooks&&(window.advancedMapHooks[i]&&window.advancedMapHooks[i].markerInfoBuild&&"function"==typeof window.advancedMapHooks[i].markerInfoBuild?j=window.advancedMapHooks[i].markerInfoBuild(e,a,X,j)||j:window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].markerInfoBuild&&"function"==typeof window.advancedMapHooks["*"].markerInfoBuild&&(j=window.advancedMapHooks["*"].markerInfoBuild(e,a,X,j)||j)),R&&(s.outsideItem=Y.Node.create(j),N?s.outsideItem._node.className="outside-marker-info outside-marker-item":s.outsideItem._node.className+=" outside-marker-info outside-marker-item",W&&W.prepend(s.outsideItem)),s.closeInfo=function(){a.hideMapInfo&&null!==s.getAnimation()&&s.setAnimation(null),o._node._closeInfo&&o._node._closeInfo()},s.smoothPanAndZoom=function(e,t){s.closeInfo(),smoothlyAnimatePanTo(s.getMap(),s.getPosition(),function(){d.getZoom();t&&s.openInfo()},e)},s.openInfo=function(){var t=o.ancestor(".custom-filter-container");if(t&&t.CustomFilter&&(t.CustomFilter.needBoundsChange=!0),s.data&&s.data.id&&d.currentInfoWindow&&d.currentInfoWindow.id&&s.id==d.currentInfoWindow.id)return!1;if(o._node._closeInfo&&o._node.showOnInit,!d.currentInfoWindow||d.currentInfoWindow&&d.currentInfoWindow.id&&d.currentInfoWindow.id!==this.id&&!o._node.showOnInit||o._node.showOnInit){if(!o._node.showOnInit&&o._node._closeInfo(),s.outsideItem&&(o._node._activatingFilterItems||N&&R&&H&&"none"!==H)){if(s.outsideItem){var r=s.outsideItem;s.outsideItem._node&&s.outsideItem.addClass("marker-activated"),s.origOutsideItem&&s.origOutsideItem._node&&(s.origOutsideItem.addClass("marker-activated"),r=s.origOutsideItem),r.one(".info-marker-image")&&r.all("img:not([src])").each(function(e){var t=e.getAttribute("data-source")||e.getAttribute("data-src");t&&(e.setAttribute("src",t),e.removeAttribute("data-source"),e.removeAttribute("data-src"))});var n=r.one(".info-marker-date");n&&n.getAttribute("data-url")&&!n.getAttribute("date-set")&&"slow"==a.dateWay&&b(n.getAttribute("data-url"),n,i)}R&&R.addClass("show-panel-info").addClass("active-marker-info")}var l=o.get("offsetHeight")&&.75*o.get("offsetHeight")||320,c={top:new G.Size(0,0),left:new G.Size(-E/2,l/2),bottom:new G.Size(0,l),right:new G.Size(E/2,l/2)},p=c[F];if(l&&!N&&(this.outsideItemFromFilter?R&&(this.mapOutsideItem||(this.mapOutsideItem=R.one('[data-item-id="'+this.id+'"]')),this.mapOutsideItem&&this.mapOutsideItem.setStyle("max-height",l)):this.outsideItem.setStyle("max-height",l-24)),s.infoWindow=null,a.hideMapInfo)s.setAnimation(google.maps.Animation.BOUNCE);else{var m=new G.InfoWindow({id:e.id,maxWidth:E,pixelOffset:p,content:N&&!a.sameAsBuildOutside?Z:this.outsideItem&&!this.outsideItemFromFilter?this.outsideItem._node.outerHTML:this.mapOutsideItem&&this.mapOutsideItem._node?this.mapOutsideItem._node.outerHTML:j});G.event.addListener(m,"domready",function(e){window.advancedMapHooks&&(window.advancedMapHooks[i]&&window.advancedMapHooks[i].infoWindowOpened&&"function"==typeof window.advancedMapHooks[i].infoWindowOpened?j=window.advancedMapHooks[i].infoWindowOpened(o.one(".gm-style-iw-d"),m,X):window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].infoWindowOpened&&"function"==typeof window.advancedMapHooks["*"].infoWindowOpened&&(j=window.advancedMapHooks["*"].infoWindowOpened(o.one(".gm-style-iw-d"),m,X))),o.all(".gm-style-iw-d .info-marker-image img:not([src])").each(function(e){var t=e.getAttribute("data-source")||e.getAttribute("data-src"),o=e.getAttribute("data-aspect")&&parseFloat(e.getAttribute("data-aspect")).toFixed(2);if(o){var a=e.get("parentNode").get("offsetWidth");e.setStyles({minHeight:(a/o).toFixed(2)+"px"})}t&&(e.setAttribute("src",t),e.removeAttribute("data-source"),e.removeAttribute("data-src"))}),o.all(".gm-style-iw-d .custom-maps-info-window").each(function(e){var t=e.one(".info-marker-date");t&&t.getAttribute("data-url")&&"slow"==a.dateWay&&b(t.getAttribute("data-url"),t,i);var r=o.get("offsetHeight")/2.6,n=e.one(".title-only");n||(r<60&&(r=60),e.setStyle("max-height",r-24)),e.all("p").removeClass("fadeIn").removeClass("preFlex").removeClass("flexIn").removeClass("preScale").removeClass("inScale")}),z&&"relative"!==z&&"click"==H&&d.panTo(s.getPosition())}),m.open({anchor:s,shouldFocus:!1}),window.info=m,s.infoWindow=m,G.event.addListener(m,"closeclick",function(){if(a.followMapPositionSet){var e=o.hasClass("map-is-used-with-filter")||o.ancestor(".custom-filter-parent-node");if(e);else if(d.currentInfoWindow&&a.mapPositionFactor){var t=50,r=d.radiusCircle||o._node&&o._node.radiusCircle;r&&(_=r.getBounds(),t=0),"fitBounds"==a.mapPositionFactor?d.fitBounds(_,t):"center"==a.mapPositionFactor&&d.setCenter(_.getCenter())}}s.outsideItem&&o._node._activatingFilterItems&&s.outsideItem._node&&s.outsideItem.removeClass("marker-activated"),s.origOutsideItem&&s.origOutsideItem._node&&s.origOutsideItem.removeClass("marker-activated"),R&&R.removeClass("active-marker-info"),d.currentInfoWindow=null}),d.currentInfoWindow=m}}},V?(google.maps.event.addListener(s,"spider_click",function(e){s.openInfo()}),V.addMarker(s)):"showOnInit"==H?(o._node.showOnInit=!0,s.openInfo(),G.event.addListener(s,"click",function(){s.openInfo()})):"none"!==H&&G.event.addListener(s,H,function(){s.openInfo()})}m.push(s),o._node._markersObj["marker-"+e.id]=s}(Q):console.log("Seems this marker: count - "+(J+1)+" "+Q.fullUrl+" "+Q.title+" "+Q.id+" has no coordinates or default empty coordinates used.",Q.position)}z&&z.append?(z.append(R),q.one(".custom-maps-outside-info")&&q.one(".custom-maps-outside-info").remove()):"relative"==z&&R?(g.append(R),R.all("img[data-source]").each(function(e){var t=e.getAttribute("data-source");e.setAttribute("data-src",t),e.removeAttribute("data-source")}),Y.one(o)&&Y.one(o).CustomFilter||window.ImageLoader&&(window.ImageLoader.loadAllLazy?window.ImageLoader.loadAllLazy({},R._node):window.ImageLoader.loadAll?window.ImageLoader.loadAll():R.all("img[data-source]").each(function(e){var t=e.getAttribute("data-source")||e.getAttribute("data-src");e.setAttribute("src",t)}))):R&&q.append(R).addClass("overflow-hidden"),o._node._closeInfo=function(){if(d.currentInfoWindow&&(d.currentInfoWindow.close(),d.currentInfoWindow=null),o._node._activatingFilterItems||N&&H&&"none"!==H){for(var e=o._node._markers.length-1;e>=0;e--)a.hideMapInfo&&null!==o._node._markers[e].getAnimation()&&o._node._markers[e].setAnimation(null),o._node._markers[e].outsideItem&&(o._node._markers[e].outsideItem&&o._node._markers[e].outsideItem._node&&o._node._markers[e].outsideItem.removeClass("marker-activated"),o._node._markers[e].origOutsideItem&&o._node._markers[e].origOutsideItem._node&&o._node._markers[e].origOutsideItem.removeClass("marker-activated"));R&&R.removeClass("show-marker-info").removeClass("active-marker-info")}},o._node._closeInfoNotActive=function(){if(d.currentInfoWindow&&(d.currentInfoWindow.close(),d.currentInfoWindow=null),o._node._activatingFilterItems||N&&H&&"none"!==H){for(var e=o._node._markers.length-1;e>=0;e--)a.hideMapInfo&&null!==o._node._markers[e].getAnimation()&&o._node._markers[e].setAnimation(null),o._node._markers[e].outsideItem&&(o._node._markers[e].outsideItem&&o._node._markers[e].outsideItem._node&&o._node._markers[e].outsideItem.removeClass("marker-activated"),o._node._markers[e].origOutsideItem&&o._node._markers[e].origOutsideItem._node&&o._node._markers[e].origOutsideItem.removeClass("marker-activated"));R&&R.removeClass("show-marker-info").removeClass("active-marker-info")}},"mouseover"===H&&G.event.addListener(d,"mouseout",function(){o._node._closeInfo()});var K=50,$=d.radiusCircle||o._node&&o._node.radiusCircle;$&&(_=$.getBounds(),K=0),a.fitBounds||a.mapPositionFactor&&"fitBounds"==a.mapPositionFactor?d.fitBounds(_,K):a.mapPositionFactor&&"center"==a.mapPositionFactor&&_&&d.setCenter(_.getCenter()),o._node._mapBound=_,o._node._markers=m,console.log(m.length+" Markers showed on Map."),o._node._markerCluster&&o._node._markerCluster.clearMarkers();var ee=null,te=null;if(window.location.search&&window.location.search.indexOf("=")>-1){var ae=window.location.search.substring(1);try{var re=v(ae);re.markerUrl&&(ee=re.markerUrl.trim().split(",")),re.markerId&&(te=re.markerId.trim().split(","))}catch(e){console.log(e)}}if(window.MarkerClusterer&&a.enableClusters){var ie=a.clustersImagesFolder||"https://assets.squarewebsites.org/sqs-map-utils/markerclusterer/m",ne=a.clustersGrid||50,se=!1;window.advancedMapHooks&&(i&&window.advancedMapHooks[i]&&window.advancedMapHooks[i].markerClustererBuild&&"function"==typeof window.advancedMapHooks[i].markerClustererBuild?(se=!0,window.advancedMapHooks[i].markerClustererBuild(a,o,d,m)):window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].markerClustererBuild&&"function"==typeof window.advancedMapHooks["*"].markerClustererBuild&&(se=!0,window.advancedMapHooks["*"].markerClustererBuild(a,o,d,m))),se||(o._node._markerCluster&&(o._node._markerCluster.setValues({imagePath:ie,gridSize:ne}),o._node._markerCluster.addMarkers(m)),o._node._markerCluster=o._node._markerCluster||new MarkerClusterer(d,m,{imagePath:ie,gridSize:ne}))}o._node._filterMarkers=function(e,t){for(var a=new G.LatLngBounds,r=!1,n=o._node._markers.length-1;n>=0;n--){var s=o._node._markers[n];t?s[e]&&s[e].indexOf(t)>-1?(s.setVisible(!0),r=!0,a.extend(s.getPosition())):s.setVisible(!1):(s.setVisible(!0),r=!0,a.extend(s.getPosition()))}r&&(o._node._mapBound=a),a.isEmpty()||(o._node.__map.fitBounds(a),o._node.__map.panToBounds(a)),window.advancedMapHooks&&(i&&window.advancedMapHooks[i]&&window.advancedMapHooks[i].afterMarkersFilter&&"function"==typeof window.advancedMapHooks[i].afterMarkersFilter?window.advancedMapHooks[i].afterMarkersFilter(o,d):window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].afterMarkersFilter&&"function"==typeof window.advancedMapHooks["*"].afterMarkersFilter&&window.advancedMapHooks["*"].afterMarkersFilter(o,d))},(ee&&ee.length||te&&te.length)&&o._node._markers.forEach(function(e){e.data&&(ee&&e.data.urlId&&ee.indexOf(e.data.urlId)>-1&&setTimeout(function(){smoothlyAnimatePanTo(d,e.position,function(){},16)},1e3),te&&e.data.id&&te.indexOf(e.data.id)>-1&&setTimeout(function(){smoothlyAnimatePanTo(d,e.position,function(){},16)},1e3))}),a.mapClickInfoClose&&(console.log("Close info on Map click"),google.maps.event.addListener(d,"click",function(e){o._node._closeInfo()})),N||"relative"===z||R&&R.setStyle("position","absolute"),N&&R?(setTimeout(function(){R&&R.removeAttribute("hidden").setStyle("display","block")},500),a.showPanel&&setTimeout(function(){R.addClass("show-panel-info").setAttribute("data-panel-show",!0)},1e3)):setTimeout(function(){},500),a.placeOutside&&"relative"==a.placeOutside&&N&&R&&R.removeAttribute("hidden").setStyle("display","block"),window.Y&&window.Y.Global&&Y.Global.fire("advanced-maps:initialized",o._node),window.dispatchEvent(new CustomEvent("advanced-maps:initialized",{detail:{mapNode:o._node}})),window.advancedMapHooks&&(i&&window.advancedMapHooks[i]&&window.advancedMapHooks[i].mapInited&&"function"==typeof window.advancedMapHooks[i].mapInited?window.advancedMapHooks[i].mapInited(o):window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].mapInited&&"function"==typeof window.advancedMapHooks["*"].mapInited&&window.advancedMapHooks["*"].mapInited(o)),L&&(d.addListener("idle",()=>{setTimeout(function(){o.all(".marker-label:not([data-wrapped])").each(function(e){e.get("parentNode").addClass("marker-label-container"),e.setAttribute("data-wrapped",!0)})},20)}),d.addListener("tilesloaded",()=>{o.all(".marker-label:not([data-wrapped])").each(function(e){e.get("parentNode").addClass("marker-label-container"),e.setAttribute("data-wrapped",!0)})}),d.addListener("zoom_changed",()=>{o.all(".marker-label:not([data-wrapped])").each(function(e){e.get("parentNode").addClass("marker-label-container"),e.setAttribute("data-wrapped",!0)})}))}}else console.log("No Map Found or malformed data"),Y.Squarespace.Widgets&&Y.Squarespace.Widgets.Information&&new window.top.Y.Squarespace.Widgets.Information({"strings.title":"Warning","strings.message":"Empty data to parse. Check your source collection is enabled, having items and is not passworded.",hideAfterTime:5e3}),window.Y&&Y.Global&&Y.Global.fire("advanced-maps:initialized",null),window.dispatchEvent(new CustomEvent("advanced-maps:initialized",{detail:{mapNode:null}})),o&&o._node&&(o.addClass("inited"),o.append("No items in collection or wrong JSON response.")),window.advancedMapHooks&&(i&&window.advancedMapHooks[i]&&window.advancedMapHooks[i].mapInited&&"function"==typeof window.advancedMapHooks[i].mapInited?window.advancedMapHooks[i].mapInited(o):window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].mapInited&&"function"==typeof window.advancedMapHooks["*"].mapInited&&window.advancedMapHooks["*"].mapInited(o));setTimeout(function(){o.runningMapInit=!1},200)}catch(e){console.log(e),setTimeout(function(){o.runningMapInit=!1},200)}},i=null;a.disableTitleClick&&o.addClass("maps-disable-title-click"),o.ancestor(".fe-block")&&o.addClass("fluid-custom-map-block");var n=o.__blockId;if(window.advancedMapHooks&&(n&&window.advancedMapHooks[n]&&window.advancedMapHooks[n].getItems&&"function"==typeof window.advancedMapHooks[n].getItems?i=window.advancedMapHooks[n].getItems(a)||null:window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].getItems&&"function"==typeof window.advancedMapHooks["*"].getItems&&(i=window.advancedMapHooks["*"].getItems(a)||null)),i){var s=function(e){try{e.length?("string"==typeof e&&(e=H(e)),e=m(a,e),console.log("Running getItems Hook"),r(e)):console.log("Empty data to from getItems Hook")}catch(e){console.log(e)}};i.then?i.then(function(e){s(e)}):s(i.items||i)}else if(a.customItemsUrl&&a.customItemsUrl.length){var l=a.customItemsUrl,d="";if(l.indexOf("|")>-1){var c=l.trim().split("|"),p=[],h=function(){c.length&&c[0]&&c[0].trim()?u(c[0].trim()+"?format=json",a.useSessionCache,!0,function(e){if(e.length)try{var t=JSON.parse(e);t=m(a,t),p=p.concat(t.items)}catch(e){console.log(e)}else console.log("Seems like empty response.");c.splice(0,1),h()}):p.length?r(p):console.log("nothing to show")};h()}else{var f=l.indexOf("-custom-index")>-1;l.indexOf("https://")>-1&&(d="?url="+encodeURIComponent(l)),l.indexOf("docs.google.com/")>-1&&(l="https://tools.squarewebsites.org/api/gss-html/"+d),f?(l=l,u(l,!1,!1,function(e){if(e.length){var t=e,o=[];if(t){if(t.indexOf('id="collectionsIndex"')>-1)if(t.indexOf('<textarea id="collectionsIndex" class="hidden" style="display:none">')>-1)t=t.split('<textarea id="collectionsIndex" class="hidden" style="display:none">')[1].split("</textarea>")[0];else{var i=document.createElement("div");i.innerHTML=t;var n=i.querySelector("#collectionsIndex");t=n.value||n.querySelector(".sqs-block-content")&&n.querySelector(".sqs-block-content").innerText||""}if(t)try{if(l.indexOf("csv-")>-1){0==t.indexOf("LZString")&&(t=V.decompressFromEncodedURIComponent(t.slice(8)));try{o=H(t.trim())}catch(e){console.log(e)}}else o=0==t.indexOf("LZString")?JSON.parse(V.decompressFromEncodedURIComponent(t.slice(8))):JSON.parse(t)}catch(e){console.warn("error : "+e),console.log(l+' id="collectionsIndex" something went wrong')}else console.log(l+' id="collectionsIndex" still not found')}else console.log(l+" returned empty response.");try{o=m(a,o),r(o)}catch(e){console.log(e)}}else console.log("Seems like empty response.")})):u(l,a.useSessionCache,!0,function(e){if(e.length){var t=function(){try{var t=H(e.trim());t.length?(t=m(a,t),r(t)):console.log("Empty data to parse CSV")}catch(e){console.log(e)}};if(a.customItemsUrl.indexOf("output=csv")>-1)t();else try{var o=JSON.parse(e);o=o[0]?o:o.items||o,o=m(a,o),r(o)}catch(e){console.log(e),t()}}else console.log("Seems like empty response.")})}}else if(a.csvData&&a.csvData.length)try{var k="";k=0==a.csvData.indexOf("[")?JSON.parse(a.csvData):H(a.csvData.trim()),k.length?(k=m(a,k),r(k)):console.log("Empty data to parse CSV")}catch(e){console.log(e)}else if(a.mapCollection&&a.mapCollection.length||a.mapCollection.urlId){var _=a.mapCollection[0]||a.mapCollection.urlId&&a.mapCollection,I=(d="","/"+_.urlId);if(_.filter&&(_.filter.tag||_.filter.category)&&(I+=_.filter.category?"?category="+_.filter.category.trim().replace(/ /g,"+").replace(/%20/g,"+").replace(/&/g,"%26"):"?",I+=_.filter.tag?(I.indexOf("?")>-1&&I.indexOf("category=")>-1?"&":"")+"tag="+_.filter.tag.trim().replace(/ /g,"+").replace(/%20/g,"+").replace(/%20/g,"+").replace(/&/g,"%26"):""),o.requestRun)J&&console.log("request running");else if(o._mapItems&&o._mapItems[_.urlId])o.requestRun=!1,r(o._mapItems[_.urlId]);else{var C=o.ancestor(".sqs-block-map");C&&C.hasAttribute("data-filter")&&(C._initMapFromFilterData=function(e){o.requestRun=!1,e=m(a,e),o._mapItems=o._mapItems||[],o._mapItems[_.urlId]=e,r(e)}),g(I,a.useSessionCache,a).then(function(e){o.requestRun=!1,e=e.items||e,e=m(a,e),o._mapItems=o._mapItems||[],o._mapItems[_.urlId]=e,r(e)}),o.requestRun=!0}}else console.log("No Items Data found to run Multiple Maps.")}else J&&console.log("No Google Maps loaded")}function C(e,t){for(;(e=e.parentElement)&&!e.classList.contains(t););return e}function S(e,t){if(e&&e._node&&(!e._node||e._node.__map||G)){var o=e.ancestor?e.ancestor(".sqs-block-map"):e.closest?e.closest(".sqs-block-map"):C(e,"sqs-block-map"),a=o&&o.hasClass?o.hasClass("sqs-block-editing")||o.hasClass("sqs-edit-dialog-open"):o&&o.classList&&o.classList.contains("sqs-block-editing"),r=U(e.ancestor(".sqs-block-map")),i={markerLat:40.720882,markerLng:-74.00076130000002};t.location&&(t.location.markerLat&&t.location.markerLng&&(i={markerLat:t.location.markerLat,mapLat:t.location.markerLat,markerLng:t.location.markerLng,mapLng:t.location.markerLng}),t.location.mapLat&&t.location.mapLng&&(i.mapLat=t.location.mapLat,i.mapLng=t.location.mapLng,i.markerLat=t.location.mapLat,i.markerLng=t.location.mapLng));var n,s={cameraControl:t.controls,rotateControl:t.controls,fullscreenControl:t.controls,labels:t.labels,zoomControl:t.controls,scaleControl:t.controls,mapTypeControl:t.controls,streetViewControl:t.controls,gestureHandling:t.gestureHandling||"auto"};e._node.ownerDocument&&(e._node.ownerDocument.defaultView||e._node.ownerDocument.parentWindow);e._node.__map&&e._node.classList.contains("sqs-block-website-component-content")&&(e._node.innerHTML="",e._node.__map=e._node.__map.__marker=e._node._markers=e._node._markersObj=e._node._mapBound=e._node.__e3_=null),n=e._node.__map||new G.Map(e._node),n.clearMarkers&&n.clearMarkers();var l=[1,21];t.minMaxZoom&&t.minMaxZoom.length&&t.minMaxZoom.indexOf("|")>-1&&(l=t.minMaxZoom.trim().split("|"));var d,c=t.satellite&&t.labels&&3!==t.style?G.MapTypeId.HYBRID:r&&r.ui&&r.ui.style&&(r.ui.style.satellite||3==t.style)?G.MapTypeId.SATELLITE:t.terrain?G.MapTypeId.TERRAIN:G.MapTypeId.ROADMAP;if(n.setOptions({zoom:t.zoomControl||t.location&&t.location.mapZoom||12,center:new G.LatLng(parseFloat(i.mapLat),parseFloat(i.mapLng)),maxZoom:parseInt(l[1]),minZoom:parseInt(l[0]),mapTypeId:c,clickableIcons:!t.disablePOIClick}),r&&r.ui&&(r.ui.style&&r.ui.style.colors&&(r.ui.styles=r.ui.style.colors),r.ui.mapTypeId&&(r.ui.mapTypeId=c),n.setOptions(r.ui)),n.setOptions(s),r&&r.ui&&r.ui.style&&r.ui.style.marker&&r.ui.style.marker.imgUrl){var p=r.ui.style.marker;d={customIcon:!0,url:p.imgUrl,scaledSize:p&&p.naturalWidth?new G.Size(p.naturalWidth/2,p.naturalHeight/2):d.scaledSize}}n.__marker?(n.__marker.setMap(n),n.__marker.setIcon(d)):(n.__marker=new G.Marker({map:n,position:new G.LatLng(parseFloat(i.markerLat),parseFloat(i.markerLng)),title:t.location.addressTitle?t.location.addressTitle+" "+y(t):y(t),icon:d,draggable:!1,optimized:0!=t.useOptimizedMarkers}),G.event.addListener(n.__marker,"click",function(){var e=encodeURIComponent(n.__marker.getPosition().toUrlValue()),o=encodeURIComponent(y(t)),a=encodeURIComponent(n.getZoom());window.open("http://maps.google.com/maps?sll="+e+"&q="+o+"&z="+a)})),a&&!n.__editing&&(console.log("MAP IS EDITED"),o.mapDragEvent&&G.event.removeListener(o.mapDragEvent),o.mapDragEvent=G.event.addListener(n,"dragend",function(){o.fire("map_drag",n)}),o.markerDragEvent&&G.event.removeListener(o.markerDragEvent),o.markerDragEvent=G.event.addListener(n.__marker,"dragend",function(){o.fire("marker_drag",n.__marker)}),o.fire("map_created",{map:n,marker:n.__marker}),n.__editing=!0),e.addClass("inited")}}function T(){var e=document.createEvent("HTMLEvents");e.initEvent("resize",!0,!1),window.dispatchEvent(e)}function x(e){if(e&&e._node){var t=e._node.ownerDocument&&(e._node.ownerDocument.defaultView||e._node.ownerDocument.parentWindow),o=e.getAttribute("data-map-json")?JSON.parse(e.getAttribute("data-map-json")):e.getAttribute("data-block-json")?JSON.parse(e.getAttribute("data-block-json")):e.one("div[data-context]")?JSON.parse(e.one("div[data-context]").getAttribute("data-context")):!!t.Y.Widget.getByNode(e)&&(t.Y.Widget.getByNode(e)&&t.Y.Widget.getByNode(e).get("model")&&t.Y.Widget.getByNode(e).get("model").toJSON()),a=e.one(">.sqs-intrinsic")||e.one("[data-context]")||e.one(".page-map")||Y.one(e.one("[data-map-context]"));if(a||(console.log("might be old map or broken markup"),a=e.one(">.sqs-block-content")),a._node.parentNode&&a._node.parentNode.className&&a._node.parentNode.className.indexOf("sqs-block-content")>-1&&a._node.parentNode.classList.add("map-block-inside"),o&&a){a&&a.setStyle("height","100%"),e.getAttribute("data-block-json")&&(e.setAttribute("data-map-json",e.getAttribute("data-block-json")),e.removeAttribute("data-block-json")),a&&a.addClass("page-map");var r=o.aspect||o.aspectRatio||e.dataset&&e.dataset.aspectRatio;r&&a.setStyles({paddingBottom:r+"%"}),a.setStyles({height:null});var i=e.getAttribute("id");i&&(a.__blockId=e.getAttribute("id"));var n=!1;window.advancedMapHooks&&(window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].getItems&&"function"==typeof window.advancedMapHooks["*"].getItems&&(n=!0),i&&window.advancedMapHooks[i]&&window.advancedMapHooks[i].getItems&&"function"==typeof window.advancedMapHooks[i].getItems&&(n=!0)),o&&n||o&&(o.multipleLocations&&o.mapCollection||o.csvData&&o.csvData.length||o.customItemsUrl)?(a&&a.addClass("custom-map-block").addClass("custom-map-block-multiple").removeClass("inited"),a&&I(a,o)):(e._node&&a&&a._node&&(e._node._map_config=e._node._mapBound=a._node._map_config=a._node._mapBound=null),a&&a.addClass("inited"),S(a,o)),T()}}else console.log("cant find map node")}function L(){if(ae)return console.log("already loaded"),!1;if(window.Static&&window.Static.SQUARESPACE_CONTEXT&&window.Static.SQUARESPACE_CONTEXT.gmRenderKey)if(!document.querySelector('script[src*="maps.googleapis.com"]')&&!window.top.document.querySelector('script[src*="maps.googleapis.com"]')||re&&!document.querySelector('script[src*="/website.components.map.visitor.js"]')){window.GoogleMapsApiLoadCallback=null,window.GoogleMapsApiCustomCallback=function(){window.___customInitMapBlocks&&window.___customInitMapBlocks()};const t=window.Static.SQUARESPACE_CONTEXT.gmRenderKey||"QUl6YVN5Q0JUUk9xNkx1dkZfSUUxcjQ2LVQ0QWVUU1YtMGQ3bXk4";var e=navigator.language||navigator.userLanguage||"en-US";let o=document.createElement("script");o.src="https://maps.googleapis.com/maps/api/js?v=quarterly&loading=async&callback=GoogleMapsApiCustomCallback&key="+atob(t)+"&language="+e.split("-")[0],o.async=!0,document.querySelector("head").append(o),console.log("Loading Google Maps itself"),ae=!0}else console.log("Google Maps script found on page, so wait")}function O(e){if(j(),!G)return console.log("No Gmaps to start"),L(),!1;if(e&&e.detail&&e.detail.map){var t=!1;if(t){var o=Y.one(t.querySelector(".page-map"))||Y.one(t.querySelector("[data-context]"))||Y.one(t.querySelector("[data-map-context]")),a=t.getAttribute("data-map-json")?JSON.parse(t.getAttribute("data-map-json")):t.getAttribute("data-block-json")?JSON.parse(t.getAttribute("data-block-json")):t.one("div[data-context]")?JSON.parse(t.one("div[data-context]").getAttribute("data-context")):!!Y.Widget.getByNode(t)&&Y.Widget.getByNode(t).get("model").toJSON();if(a&&(a.multipleLocations&&a.mapCollection||a.csvData&&a.csvData.length||a.customItemsUrl))o&&o.addClass("custom-map-block"),o&&o.setStyle("height","100%"),o&&I(o,a);else{if(t._map_config=null,o.addClass("inited"),o._node&&o._node.__map){o._node.__map.clearMarkers&&o._node.__map.clearMarkers();o._node.__customStyle;var r={cameraControl:a.controls,rotateControl:a.controls,fullscreenControl:a.controls,labels:a.labels,zoomControl:a.controls,scaleControl:a.controls,mapTypeControl:a.controls,streetViewControl:a.controls,gestureHandling:a.gestureHandling||"auto"};console.log("Controls",r),o._node.__map.setOptions(r),a.showUserLocation&&"none"!==a.showUserLocation&&D(o._node.__map,a.showUserLocation)}o._node&&o._node.__map&&a&&a.style&&a.style,console.log("Regular Map build from event")}}}else{try{var i=Y.one(".sqs-block-map[data-block-json]")||Y.one(".sqs-block-map[data-map-json]");i&&E("Map ID: "+i.getAttribute("id")),Y.all(".sqs-block-map").each(function(e){X?e.hasAttribute("data-was-in-view")&&"true"==e.getAttribute("data-in-view")&&x(e):x(e)})}catch(e){console.log(e)}try{if(window.top&&window.self!==window.top&&window.top.document&&window.top.document.querySelector("html.squarespace-damask"))try{window.top.Y.all(".sqs-block-map").each(function(e){x(e)})}catch(e){console.log(e)}}catch(e){}}}function A(){function e(){t&&t.length&&t.forEach(function(e){if(G&&e.__map){if(e._map_config&&e._map_config.followMapPositionSet){var t=50,o=e.__map.radiusCircle||e.radiusCircle;e.radiusCircle&&(e._mapBound=o.getBounds(),t=0),e._map_config.fitBounds||e._map_config.mapPositionFactor&&"fitBounds"==e._map_config.mapPositionFactor?e.__map.fitBounds&&e.__map.fitBounds(e._mapBound,t):e._map_config.mapPositionFactor&&"center"==e._map_config.mapPositionFactor&&e._mapBound&&e.__map.setCenter(e._mapBound.getCenter())}setTimeout(function(){e.__map&&G.event.trigger(e.__map,"resize")},220)}}),this.resizeTimeout=null}var t=Array.prototype.slice.call(document.querySelectorAll(".custom-map-block"));this.resizeTimeout&&clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(e,300)}function E(e){return!1}function D(e,t){e._customLocator&&e._customLocator.control&&e._customLocator.control.parentNode&&e._customLocator.control.parentNode.removeChild(e._customLocator.control);var o=e.getDiv();if(o){var a=o.querySelector(".custom-locator-control");a&&a.parentNode.removeChild(a)}var r=document.createElement("div");r.className="custom-locator-control";var i=document.createElement("button");i.className="maps-location-icon",i.style.backgroundColor="#fff",i.style.border="none",i.style.outline="none",i.style.borderRadius="2px",i.style.boxShadow="0 1px 4px rgba(0,0,0,0.3)",i.style.cursor="pointer",i.style.margin="0 10px",i.style.padding="0",i.title="My Location",r.appendChild(i);var n=document.createElement("div");n.style.margin="0",n.style.width="28px",n.style.height="28px",n.style.backgroundImage="url(https://assets.squarewebsites.org/sqs-map-utils/icons/loc-grey.svg)",n.style.backgroundSize="68%",n.style.backgroundPosition="center",n.style.backgroundRepeat="no-repeat",i.appendChild(n),i.addEventListener("click",function(){i.className+=" locating",n.style.animation="sqs-spin 1s infinite ease-in-out",navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){var o=100,a=new G.LatLng(t.coords.latitude,t.coords.longitude),r=new G.Marker({position:a,clickable:!1,icon:{url:"https://assets.squarewebsites.org/sqs-map-utils/icons/userdot.png",origin:new G.Point(0,0),anchor:new G.Point(9,9),scaledSize:new G.Size(18,18)},shadow:null,zIndex:999,map:e}),s=new G.Circle({map:e,strokeColor:"#007cff",strokeWeight:1,strokeOpacity:1,fillColor:"#007cff",fillOpacity:.2,radius:o});s.bindTo("center",r,"position"),e.panTo(a),e.setZoom(Math.max(16,e.getZoom()+1)),i.className="maps-location-icon located",n.style.animation="none",n.style.backgroundImage="url(https://assets.squarewebsites.org/sqs-map-utils/icons/loc.svg)"}):(i.className="maps-location-icon not-located",n.style.animation="none")}),r.index=1,e.controls&&e.controls[G.ControlPosition[t]]&&(e.controls[G.ControlPosition[t]].push(r),e._customLocator={control:r,position:G.ControlPosition[t],index:e.controls[G.ControlPosition[t]].length})}function H(e){e.indexOf("")>-1&&(e=e.replace(/\/gm,"\n"));var t=e.csvToArray(),o=[];if(t.length&&t.length>1)for(var a=t.splice(0,1)[0],r=0;r<t.length;r++){for(var i={},n=t[r],s=0;s<a.length;s++){var l=P(a[s].trim());i[l]=n[s]}o.push(i)}else console.log("Seems not enough data in your CSV.",e,t);return o}function P(e){return e.split(" ").map(function(e,t){return 0==t?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()}).join("")}function N(){window.customMapStyles?window.__customMapStyles=ee.concat(window.customMapStyles):window.__customMapStyles=ee}function z(e,t,o,a){var r=document.createElement("script");r.src=e+"?cache="+((new Date).getTime()+"").substr(0,8),r.onload=function(){a&&this.remove(),o&&o(null,{nodes:[this]})},t.appendChild(r)}function U(e,t,o){if(e||o){var a=e&&(e._node||e).ownerDocument,r=a?a.defaultView||a.parentWindow:window;o=o||(e.getAttribute("data-map-json")?JSON.parse(e.getAttribute("data-map-json")):e.getAttribute("data-block-json")?JSON.parse(e.getAttribute("data-block-json")):e.getAttribute("data-context")?JSON.parse(e.getAttribute("data-context")):(e._node||e).querySelector("div[data-context]")?JSON.parse((e._node||e).querySelector("div[data-context]").getAttribute("data-context")):!!r.Y.Widget.getByNode(e)&&(r.Y.Widget.getByNode(e).get("model")&&r.Y.Widget.getByNode(e).get("model").toJSON()));var i=e&&(e.__blockId||e.id||e.getAttribute("id"));window.advancedMapHooks&&o&&(i&&window.advancedMapHooks[i]&&window.advancedMapHooks[i].getMapData&&"function"==typeof window.advancedMapHooks[i].getMapData?o=window.advancedMapHooks[i].getMapData(o)||o:window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].getMapData&&"function"==typeof window.advancedMapHooks["*"].getMapData&&(o=window.advancedMapHooks["*"].getMapData(o)||o));var n={};if(o&&o.style){if(n={location:o.location,ui:{showControls:o.controls,showTerrain:o.terrain,showLabels:o.labels}},o.style>6&&window.__customMapStyles&&window.__customMapStyles[o.style-7]&&(n.ui.style=Object.assign({},window.__customMapStyles[o.style-7].styles)),o.style<7&&(n.ui.style=Object.assign({},te[o.style])),n.ui.style||(n.ui.style=Object.assign({},te[0])),o.catsMarkers&&o.catsMarkers.length&&o.catsMarkers.indexOf("--")>-1){try{var s=o.catsMarkers.split("--");n.ui.style.catsMarkers||(n.ui.style.catsMarkers={}),s.forEach(function(e){if(e){var t=e.trim().split("|");if(t.length>=2){var o=t[2]&&t[2].split("x")||[64,64];n.ui.style.catsMarkers[t[0]]={imgUrl:t[1],naturalWidth:o[0],naturalHeight:o[1]}}}})}catch(e){console.log(e)}e.__catsMarkers=n.ui.style.catsMarkers}if(o.snazzyUrl&&o.snazzyData)try{var l=JSON.parse(o.snazzyData);l&&l.length&&(n.ui.style.colors=l)}catch(e){console.log(e)}}if(n&&n.ui){o&&(o.multipleLocations&&o.mapCollection||o.csvData&&o.csvData.length||o.customItemsUrl)&&(n.ui.multipleLocations=!0);var d=G||!1;d&&(n.ui.mapTypeId=o.satellite&&o.labels?d.MapTypeId.HYBRID:o.satellite&&!o.labels?d.MapTypeId.SATELLITE:o.terrain?d.MapTypeId.TERRAIN:d.MapTypeId.ROADMAP),n.ui.zoom=o.zoomControl||o.location&&o.location.mapZoom||12;var c=o.markerImgScale<3.1?o.markerImgScale:o.markerImgScale&&o.markerImgScale/100<4?o.markerImgScale/100:1;o.markerImage||o["marker-image"]&&(o["marker-image"].assetUrl||o["marker-image"].asset)?(n.ui.style.marker={},n.ui.style.marker.imgUrl=o["marker-image"]&&o["marker-image"].asset?o["marker-image"].asset.assetUrl:o["marker-image"]&&o["marker-image"].assetUrl?o["marker-image"].assetUrl:o.markerImage?o.markerImage:"",n.ui.style.marker.naturalHeight=o["marker-image"]&&o["marker-image"].height?o["marker-image"].height*c:o.markerImageHeight?o.markerImageHeight*c:64*c,n.ui.style.marker.naturalWidth=o["marker-image"]&&o["marker-image"].width?o["marker-image"].width*c:o.markerImageWidth?o.markerImageWidth*c:64*c):(n.ui.style.marker||(n.ui.style.marker={imgUrl:o.style>6&&"/universal/images-v6/icons/cover-pages-map-marker-pin-dark-2x.png",naturalWidth:48,naturalHeight:64}),n.ui.style.marker.originalHeight||(n.ui.style.marker.originalHeight=n.ui.style.marker.naturalHeight,n.ui.style.marker.originalWidth=n.ui.style.marker.naturalWidth),n.ui.style.marker.naturalHeight=n.ui.style.marker.originalHeight*c||64*c,n.ui.style.marker.naturalWidth=n.ui.style.marker.originalWidth*c||48*c),n.ui.style.satellite=o.satellite,n.ui.style&&n.ui.style.colors&&n.ui.style.labels&&(n.ui.style.colors=n.ui.style.colors.concat(n.ui.style.labels))}return window.advancedMapHooks&&(i&&window.advancedMapHooks[i]&&window.advancedMapHooks[i].getMapStyle&&"function"==typeof window.advancedMapHooks[i].getMapStyle?n=window.advancedMapHooks[i].getMapStyle(n,o,t)||n:window.advancedMapHooks["*"]&&window.advancedMapHooks["*"].getMapStyle&&"function"==typeof window.advancedMapHooks["*"].getMapStyle&&(n=window.advancedMapHooks["*"].getMapStyle(n,o,t)||n)),!t&&o&&o.style>6&&e&&e.__map&&n&&n.ui&&n.ui&&n.ui.style&&n.ui.style.colors&&e.__map.setOptions({styles:n.ui.style.colors}),n}}function F(e){if(G=e||G||window.google&&window.google.maps||!1,G&&(!G||G&&G.Map&&G.Map.prototype&&!G.Map.prototype.markers)){window.google||(window.google={}),G.Map.prototype.markers=[],G.Map.prototype.getMarkers=function(){return this.markers},G.Map.prototype.clearMarkers=function(){for(var e=0;e<this.markers.length;e++)this.markers[e].setMap(null);this.markers=[]},G.Marker.prototype._setIcon=G.Marker.prototype.setIcon,G.Marker.prototype.setIcon=function(e){var t=this.getMap()&&this.getMap().getDiv();if(e&&e.scaledSize&&e.scaledSize.width&&e.url&&e.url.indexOf("/universal/images-v6/icons/cover-pages-map-marker-pin-dark-2x.png")>-1&&e.scaledSize.width,t&&t.__customStyle&&t.__customStyle.ui&&t.__customStyle.ui.style&&t.__customStyle.ui.style.marker&&t.__customStyle.ui.style.marker.imgUrl&&!e.customIcon){var o=t.__customStyle.ui.style.marker;(!e||(e.url&&e.url!==o.imgUrl||o.naturalWidth/2!==e.scaledSize.width)&&e&&!e.tagMarker&&!e.categoryMarker)&&(!t.__customStyle||!t.__customStyle.ui.multipleLocations||e&&e.customIcon?e={url:o.imgUrl,scaledSize:o&&o.naturalWidth?new G.Size(o.naturalWidth/2,o.naturalHeight/2):e.scaledSize}:(this.setMap(null),console.log("no need icon",e)))}e&&this._setIcon(e)},G.Marker.prototype._setMap=G.Marker.prototype.setMap,G.Marker.prototype.setMap=function(e){e&&e.markers&&(e.markers[e.markers.length]=this),this._setMap(e)};G.Map.prototype.setOptions;var t=G.Map.prototype.setValues;G.Map.prototype.setValues=function(e){var o=this.getDiv(),a=null;o&&o.parentNode&&!o.parentNode.__map&&(o.__map=this,o.parentNode.__map=this,a=new CustomEvent("map_created",{detail:{map:o.parentNode}})),!a&&o.className&&!o.parentNode.__map&&o.className.indexOf("custom-map-block")>-1&&(o.__map=this,o.parentNode.__map=this,a=null,a=new CustomEvent("map_created",{detail:{map:o.dataset.context?o:o.parentNode}})),o&&o.parentNode&&(o.__customStyle=U(o.parentNode)),t.apply(this,arguments),a&&(document.dispatchEvent(a),window.self,window.top)}}}function B(e){if(!window._watchMapsInterval){var t=!1,o=window.gMapsPromise?window:!!window.top.gMapsPromise&&window.top,a=function(){if(o=window.gMapsPromise?window:!!window.top.gMapsPromise&&window.top,o&&!o.__mapsCallbackSet){var e=o.GoogleMapsApiLoadCallback;o.GoogleMapsApiLoadCallback=function(){o.__mapsCallbackSet||(console.log("Map API Loaded from callback"),console.log("custom maps load init",G&&G.version),o.__customMapBlocksRunOnAPILoadCallback&&"function"==typeof o.__customMapBlocksRunOnAPILoadCallback?(F(o.google.maps),o.__customMapBlocksRunOnAPILoadCallback()):setTimeout(function(){F(o.google.maps),O()},80),window.self!==window.top&&o==window.top&&(e(),console.log("need apply original callback for Admin"),setTimeout(function(){F(o.google.maps),O()},80)),o.__mapsCallbackSet=!0)},o.gMapsPromise&&!t&&(o.gMapsPromise.catch(function(e){o.__mapsCallbackSet=!0,window._watchMapsInterval&&window.clearInterval(window._watchMapsInterval),window._watchMapsInterval=null}),o.gMapsPromise.then(function(e){console.log("custom maps load init from promise"),setTimeout(function(){F(e),O()},80),window._watchMapsInterval&&window.clearInterval(window._watchMapsInterval),window._watchMapsInterval=null,o.__mapsCallbackSet=!0}),t=!0)}o&&o.__mapsCallbackSet&&(window._watchMapsInterval&&window.clearInterval(window._watchMapsInterval),window._watchMapsInterval=null)};window._watchMapsInterval=setInterval(a,20),a()}}function R(e){return e?e.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/`/g,"&#x60;"):e}function W(e,t,a){if(e=e._node||e,e){var r={aspect:42,customItemsUrl:"",customMapLocation:"",markerImgScale:100,showExcerpt:!1,customMapCollectionSelect:null,"marker-image":{},markerClickable:!1,zoomControl:12,multipleLocations:!1,csvData:"",style:2,useSessionCache:!1,aspectRatio:37.76150627615063,mapPositionFactor:"fitBounds",terrain:!1,location:{addressCountry:"United States",addressTitle:"New York",addressLine1:"",addressLine2:"",markerLat:40.720882,mapLat:40.720882,markerLng:-74.000988,mapLng:-74.000988,mapZoom:12},showTitle:!1,showImage:!1,showLocation:!1,showCats:!1,showTags:!1,controls:!0,collectionFilter:{},markerInfoFactor:"none",enableCollectionFilter:!1,mapCollection:null,satellite:!1,enableClusters:!1,showUserLocation:"none",markerInfoWidth:300,popupPosition:"top",clustersGrid:50,"csvImport-Descr":null,clustersImagesFolder:"https://assets.squarewebsites.org/sqs-map-utils/markerclusterer/m",labels:!0,followMapPositionSet:!0,buildInfoOutside:!1,placeOutside:"left"};t&&"object"==typeof t&&(r=o(r,t));var i='<div class="website-component-block sqs-block-website-component sqs-block map-block sqs-block-map dynamic-map-block" data-animation-role="image" data-block-type="1337" data-definition-name="website.components.map" data-aspect-ratio="'+r.aspect+'" data-map-json="'+R(JSON.stringify(r))+'"><div class="sqs-block-content page-map" style="padding-bottom:'+r.aspect+'%"></div></div>';a?"before"==a?a="beforeend":"after"==a&&(a="afterend"):a="beforeend",e.insertAdjacentHTML(a,i),G?window.___customInitMapBlocks():Q||B(window)}else console.log("Sorry, no target provided")}function j(){let e=document.querySelectorAll('.sqs-block[data-definition-name="website.components.map"]');for(let o=0;o<e.length;o++){const a=e[o];if(a.classList.add("sqs-block-map","map-block"),a){const e=a.querySelector("div[data-context]")&&a.querySelector("div[data-context]").dataset.context;if(e&&(e+"").indexOf("terrain")>-1){a.setAttribute("data-map-json",e);try{var t=JSON.parse(e);a.querySelector("div[data-context]").setAttribute("data-context",JSON.stringify({containerStyles:t.containerStyles,gmak:t.gmak,locale:t.locale}))}catch(e){console.log("Can not parse map context",e)}}if(re){let e=a.querySelector("div[data-context]");e&&(e.setAttribute("data-map-context",e.getAttribute("data-context")),e.removeAttribute("data-context"))}}}}function Z(){window.advanced_maps_frontend_started=!0,N(),console.log("Maps started"),j(),document.addEventListener("map_created",O);try{window.self!==window.top&&window.top.document.addEventListener("map_created",O)}catch(e){}window.addEventListener("resize",A,!1);var e=function(){const e=function(e,t){for(let t of e)"attributes"===t.type&&"class"==t.attributeName&&t.target.className&&t.target.className.indexOf&&t.target.className.indexOf("fancybox-content")>-1&&t.target.className.indexOf("is-loaded")>-1&&window.___customInitMapBlocks()},t=new MutationObserver(e);window.Squarespace.onInitialize(window.Y,function(){if(console.log("Custom Maps init onInitialize"),window.advancedMapHooks&&window.advancedMapHooks.buildMaps&&"function"==typeof window.advancedMapHooks.buildMaps)try{window.advancedMapHooks.buildMaps(W)}catch(e){console.log("build Maps hook missed")}if(j(),window.Y&&window.Y.Squarespace&&window.Y.Squarespace.Block&&window.Y.Squarespace.Block.Map)try{if(window.top.Y.Squarespace.DialogFields&&window.top.Y.Squarespace.DialogFields.Map){window.top.Y.Squarespace.DialogFields.Map.prototype.initializer;window.top.Y.Squarespace.DialogFields.Map.prototype.initializer=function(e){e.panel&&(this.panel=e.panel),this.on("dataChange",function(e){console.log("panel dataChange",e)}),this.panel.on("geocode",function(e){console.log("geocode",e)})}}window.top.Y.Squarespace.Block.Map.prototype.getViewData||(window.top.Y.Squarespace.Block.Map.prototype.getViewData=window.top.Y.Squarespace.Block.Map.prototype._getViewData,window.top.Y.Squarespace.Block.Map.prototype._getViewData=function(){var e=this.get("model").toJSON(),t=U(null,null,e);return t||(t=this.getViewData()),t}),window.Y.Squarespace.Block.Map.prototype.getViewData||(window.Y.Squarespace.Block.Map.prototype.getViewData=window.Y.Squarespace.Block.Map.prototype._getViewData,window.Y.Squarespace.Block.Map.prototype._getViewData=function(){var e=this.get("model").toJSON(),t=U(null,null,e);return t||(t=this.getViewData()),t}),window.top.Y.Squarespace.Block&&window.top.Y.Squarespace.Block.ModelEditorDialog&&window.top.Y.Squarespace.Block.ModelEditorDialog.Map&&(window.top.Y.Squarespace.Block.ModelEditorDialog.Map.prototype._toggleTerrainField=function(){try{var e=this.get("dialog"),t=e.getField("terrain");e&&t&&t.show()}catch(e){console.log(e)}})}catch(e){}N(),h("https://assets.squarewebsites.org/sqs-map-utils/styles.min.css","advanced-maps-styles"),J&&console.log(window.GoogleMapsApiLoadCallback,google),window.Y.one(".sqs-block-map")?(console.log("Map block on page"),Q||B(window),F(window.google&&window.google.maps),O()):(console.log("No map-block on page"),G?(F(),O()):Q||B(window.top)),window.CustomMapsInit||(window.CustomMapsInit=Y.Global.on("custom-map-init",O));try{window.self!==window.top&&window.top.document.querySelector("html.squarespace-damask")&&localStorage.removeItem("ok_waiting_SQS_plugins_update")}catch(e){}var e=document.body;t.observe(e,{attributes:!0,childList:!0,subtree:!0})}),window.Squarespace.onDestroy(window.Y,function(){window.removeEventListener("resize",A,!1),window.CustomMapsInit&&(window.CustomMapsInit.detach(),window.CustomMapsInit=null),window._watchMapsInterval&&window.clearInterval(window._watchMapsInterval),window._watchMapsInterval=null,t.disconnect()})};window.___customInitMapBlocks=function(){F(window.google&&window.google.maps),O()},window.Y?e():document.addEventListener("DOMContentLoaded",function t(){document.removeEventListener("DOMContentLoaded",t,!1),setTimeout(function(){e()},36)},!1)}var V=function(){function e(e,t){if(!a[e]){a[e]={};for(var o=0;o<e.length;o++)a[e][e.charAt(o)]=o}return a[e][t]}var t=String.fromCharCode,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",a={},r={compressToEncodedURIComponent:function(e){return null==e?"":r._compress(e,6,function(e){return o.charAt(e)})},decompressFromEncodedURIComponent:function(t){return null==t?"":""==t?null:(t=t.replace(/ /g,"+"),r._decompress(t.length,32,function(a){return e(o,t.charAt(a))}))},compress:function(e){return r._compress(e,16,function(e){return t(e)})},_compress:function(e,t,o){if(null==e)return"";var a,r,i,n={},s={},l="",d="",c="",p=2,m=3,u=2,g=[],h=0,f=0;for(i=0;i<e.length;i+=1)if(l=e.charAt(i),Object.prototype.hasOwnProperty.call(n,l)||(n[l]=m++,s[l]=!0),d=c+l,Object.prototype.hasOwnProperty.call(n,d))c=d;else{if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(a=0;u>a;a++)h<<=1,f==t-1?(f=0,g.push(o(h)),h=0):f++;for(r=c.charCodeAt(0),a=0;8>a;a++)h=h<<1|1&r,f==t-1?(f=0,g.push(o(h)),h=0):f++,r>>=1}else{for(r=1,a=0;u>a;a++)h=h<<1|r,f==t-1?(f=0,g.push(o(h)),h=0):f++,r=0;for(r=c.charCodeAt(0),a=0;16>a;a++)h=h<<1|1&r,f==t-1?(f=0,g.push(o(h)),h=0):f++,r>>=1}p--,0==p&&(p=Math.pow(2,u),u++),delete s[c]}else for(r=n[c],a=0;u>a;a++)h=h<<1|1&r,f==t-1?(f=0,g.push(o(h)),h=0):f++,r>>=1;p--,0==p&&(p=Math.pow(2,u),u++),n[d]=m++,c=String(l)}if(""!==c){if(Object.prototype.hasOwnProperty.call(s,c)){if(c.charCodeAt(0)<256){for(a=0;u>a;a++)h<<=1,f==t-1?(f=0,g.push(o(h)),h=0):f++;for(r=c.charCodeAt(0),a=0;8>a;a++)h=h<<1|1&r,f==t-1?(f=0,g.push(o(h)),h=0):f++,r>>=1}else{for(r=1,a=0;u>a;a++)h=h<<1|r,f==t-1?(f=0,g.push(o(h)),h=0):f++,r=0;for(r=c.charCodeAt(0),a=0;16>a;a++)h=h<<1|1&r,f==t-1?(f=0,g.push(o(h)),h=0):f++,r>>=1}p--,0==p&&(p=Math.pow(2,u),u++),delete s[c]}else for(r=n[c],a=0;u>a;a++)h=h<<1|1&r,f==t-1?(f=0,g.push(o(h)),h=0):f++,r>>=1;p--,0==p&&(p=Math.pow(2,u),u++)}for(r=2,a=0;u>a;a++)h=h<<1|1&r,f==t-1?(f=0,g.push(o(h)),h=0):f++,r>>=1;for(;;){if(h<<=1,f==t-1){g.push(o(h));break}f++}return g.join("")},decompress:function(e){return null==e?"":""==e?null:r._decompress(e.length,32768,function(t){return e.charCodeAt(t)})},_decompress:function(e,o,a){var r,i,n,s,l,d,c,p=[],m=4,u=4,g=3,h="",f=[],w={val:a(0),position:o,index:1};for(r=0;3>r;r+=1)p[r]=r;for(n=0,l=Math.pow(2,2),d=1;d!=l;)s=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=a(w.index++)),n|=(s>0?1:0)*d,d<<=1;switch(n){case 0:for(n=0,l=Math.pow(2,8),d=1;d!=l;)s=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=a(w.index++)),n|=(s>0?1:0)*d,d<<=1;c=t(n);break;case 1:for(n=0,l=Math.pow(2,16),d=1;d!=l;)s=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=a(w.index++)),n|=(s>0?1:0)*d,d<<=1;c=t(n);break;case 2:return""}for(p[3]=c,i=c,f.push(c);;){if(w.index>e)return"";for(n=0,l=Math.pow(2,g),d=1;d!=l;)s=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=a(w.index++)),n|=(s>0?1:0)*d,d<<=1;switch(c=n){case 0:for(n=0,l=Math.pow(2,8),d=1;d!=l;)s=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=a(w.index++)),n|=(s>0?1:0)*d,d<<=1;p[u++]=t(n),c=u-1,m--;break;case 1:for(n=0,l=Math.pow(2,16),d=1;d!=l;)s=w.val&w.position,w.position>>=1,0==w.position&&(w.position=o,w.val=a(w.index++)),n|=(s>0?1:0)*d,d<<=1;p[u++]=t(n),c=u-1,m--;break;case 2:return f.join("")}if(0==m&&(m=Math.pow(2,g),g++),p[c])h=p[c];else{if(c!==u)return null;h=i+i.charAt(0)}f.push(h),p[u++]=i+h.charAt(0),m--,i=h,0==m&&(m=Math.pow(2,g),g++)}}};return r}(),J=!1,G=window.google&&window.google.maps;if(!G)try{G=window.top.google&&window.top.google.maps}catch(e){}var X=document.currentScript&&document.currentScript.id&&document.currentScript.id.indexOf("-defer")>-1,Q=!1,K={imgUrl:"/universal/images-v6/icons/cover-pages-map-marker-pin-dark-2x.png",naturalWidth:48,naturalHeight:64};window.__customMapStyles=[];var $={Original:{marker:{imgUrl:"https://maps.gstatic.com/mapfiles/api-3/images/spotlight-poi2_hdpi.png",naturalWidth:54,naturalHeight:86},colors:[{elementType:"labels",stylers:[{visibility:"off"}]}],labels:[{elementType:"labels",stylers:[{visibility:"on"}]}]},Grayscale:{marker:K,colors:[{featureType:"landscape.man_made",elementType:"all",stylers:[{lightness:51}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"all",stylers:[{gamma:2.51}]},{featureType:"road.arterial",elementType:"all",stylers:[{gamma:1.9}]},{featureType:"water",elementType:"all",stylers:[{gamma:1.36}]},{featureType:"road.highway",elementType:"all",stylers:[{gamma:1.33}]},{featureType:"transit.station.rail",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"transit.station.bus",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"transit",elementType:"all",stylers:[{gamma:1.2},{hue:"#0033ff"}]},{featureType:"administrative.neighborhood",elementType:"labels",stylers:[{gamma:1.43}]},{featureType:"water",elementType:"all",stylers:[{lightness:-47}]},{featureType:"all",elementType:"all",stylers:[{saturation:-100}]},{featureType:"road.arterial",elementType:"labels",stylers:[{lightness:23}]},{elementType:"labels",stylers:[{visibility:"off"}]}],labels:[{elementType:"labels",stylers:[{visibility:"on"}]}]},Satellite:{satellite:!0,marker:null,colors:[{stylers:[{visibility:"off"}]},{elementType:"labels",stylers:[{visibility:"off"}]}],labels:[{elementType:"labels",stylers:[{visibility:"on"}]}]},MinimalDark:{marker:{imgUrl:"/universal/images-v6/icons/cover-pages-map-marker-pin-light-2x.png",naturalWidth:48,naturalHeight:64},colors:[{stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#0f0f0f"},{visibility:"on"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{color:"#1f1f1f"},{visibility:"on"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#5a5a5a"},{visibility:"on"},{weight:.6}]}],labels:[{elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#777777"}]},{elementType:"labels.text.stroke",stylers:[{weight:2},{visibility:"on"},{color:"#1f1f1f"}]}]},MinimalLight:{marker:K,colors:[{stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#f2f2f2"},{visibility:"on"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{visibility:"on"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#bbbbbb"},{visibility:"on"},{weight:.6}]}],labels:[{elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#999999"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{weight:2}]}]},MinimalBlue:{marker:K,colors:[{stylers:[{visibility:"off"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#ccdee9"},{visibility:"on"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{visibility:"on"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#bbbbbb"},{visibility:"on"},{weight:.6}]}],labels:[{elementType:"labels.text.fill",stylers:[{visibility:"on"},{color:"#999999"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{weight:2}]}]}},ee=[{label:"Gamma Dark",value:7,icon:"https://assets.squarewebsites.org/sqs-map-utils/icons/gamma-dark.png",styles:{marker:{imgUrl:"/universal/images-v6/icons/cover-pages-map-marker-pin-light-2x.png",naturalWidth:48,naturalHeight:64},colors:[{featureType:"all",elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#000000"},{lightness:40}]},{featureType:"all",elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#000000"},{lightness:16}]},{featureType:"all",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:17},{weight:1.2}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#000000"},{lightness:20}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#000000"},{lightness:21}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#000000"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#000000"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#000000"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#000000"},{lightness:16}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#000000"},{lightness:19}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#0f1f2e"},{lightness:17}]}]}},{label:"Snazzy Maps",value:8,icon:"https://assets.squarewebsites.org/sqs-map-utils/icons/snazzy-maps.png",styles:{marker:{imgUrl:"/universal/images-v6/icons/cover-pages-map-marker-pin-light-2x.png",naturalWidth:48,naturalHeight:64},colors:[{featureType:"water",elementType:"geometry",stylers:[{color:"#333739"}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#2ecc71"}]},{featureType:"poi",stylers:[{color:"#2ecc71"},{lightness:-7}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#2ecc71"},{lightness:-28}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#2ecc71"},{visibility:"on"},{lightness:-15}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#2ecc71"},{lightness:-18}]},{elementType:"labels.text.fill",stylers:[{color:"#ffffff"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#2ecc71"},{lightness:-34}]},{featureType:"administrative",elementType:"geometry",stylers:[{visibility:"on"},{color:"#333739"},{weight:.8}]},{featureType:"poi.park",stylers:[{color:"#2ecc71"}]},{featureType:"road",elementType:"geometry.stroke",stylers:[{color:"#333739"},{weight:.3},{lightness:10}]}]}},{label:"Blue Essence",value:9,icon:"https://assets.squarewebsites.org/sqs-map-utils/icons/blue-essence.png",styles:{marker:{imgUrl:"/universal/images-v6/icons/cover-pages-map-marker-pin-dark-2x.png",naturalWidth:48,naturalHeight:64},colors:[{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{visibility:"on"},{color:"#e0efef"}]},{featureType:"poi",elementType:"geometry.fill",stylers:[{visibility:"on"},{hue:"#1900ff"},{color:"#c0e8e8"}]},{featureType:"road",elementType:"geometry",stylers:[{lightness:100},{visibility:"simplified"}]},{featureType:"road",elementType:"labels",stylers:[{visibility:"off"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{visibility:"on"},{lightness:700}]},{featureType:"water",elementType:"all",stylers:[{color:"#7dcdcd"}]}]}},{label:"Break",value:10,icon:"https://assets.squarewebsites.org/sqs-map-utils/icons/break.png",styles:{marker:{imgUrl:"/universal/images-v6/icons/cover-pages-map-marker-pin-dark-2x.png",naturalWidth:48,naturalHeight:64},colors:[{featureType:"administrative",elementType:"labels.text.fill",stylers:[{color:"#444444"}]},{featureType:"landscape",elementType:"all",stylers:[{color:"#f2f2f2"}]},{featureType:"poi",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"all",stylers:[{saturation:-100},{lightness:45}]},{featureType:"road.highway",elementType:"all",stylers:[{visibility:"simplified"}]},{featureType:"road.arterial",elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"all",stylers:[{visibility:"off"}]},{featureType:"water",elementType:"all",stylers:[{color:"#f496ac"},{visibility:"on"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#fcdbd9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#ed462d"}]}]}}],te=[null,$.Original,$.Grayscale,$.Satellite,$.MinimalLight,$.MinimalDark,$.MinimalBlue];window.__customDefaultMapStyles=te,window.__advancedMapHooksDefaults={"*":{getMapData:function(e){return e},getMapStyle:function(e){return e},getItems:function(e){return e},itemJSON:function(e){return e},markerClustererBuild:function(e,t,o,a){},mapInited:function(e){}}},"function"!=typeof Object.assign&&Object.defineProperty(Object,"assign",{value:function(e,t){"use strict";if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var o=Object(e),a=1;a<arguments.length;a++){var r=arguments[a];if(null!=r)for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(o[i]=r[i])}return o},writable:!0,configurable:!0}),a();var oe=function(e){var t=function(e){return e.replace("http://","").replace("https://","").split("/")[0]||!1};return t(e)&&t(location.href)!==t(e)},ae=!1,re=!0;String.prototype.csvToArray=function(e){var t=function(e){var t=[",",";","|","\t"],o=t.map(function(t){return e.indexOf(t)}).reduce(function(e,t){return-1===e||-1!==t&&t<e?t:e});return e[o]||","},o={fSep:",",rSep:"\n",quot:'"',head:!1,trim:!1};if(e)for(var a in o)e[a]||(e[a]=o[a]);else e=o;var r=[[""]];e.fSep=t(this)||",",this.indexOf("\r\n")>-1&&(e.rSep="\r\n");for(var i=f=p=q=0;p<this.length;p++)switch(c=this.charAt(p)){case e.quot:q&&this.charAt(p+1)==e.quot?(r[i][f]+=e.quot,++p):q^=1;break;case e.fSep:q?r[i][f]+=c:(e.trim&&(r[i][f]=r[i][f].replace(/^\s\s*/,"").replace(/\s\s*$/,"")),r[i][++f]="");break;case e.rSep.charAt(0):q||e.rSep.charAt(1)&&(!e.rSep.charAt(1)||e.rSep.charAt(1)!=this.charAt(p+1))?r[i][f]+=c:(e.trim&&(r[i][f]=r[i][f].replace(/^\s\s*/,"").replace(/\s\s*$/,"")),r[++i]=[""],r[i][f=0]="",e.rSep.charAt(1)&&++p);break;default:r[i][f]+=c}return e.head&&r.shift(),r[r.length-1].length<r[0].length&&r.pop(),r},window.advanced_maps_frontend_started?console.log("Seems Advanced Maps Front already initialized"):Z(),window.top.__pageEditing=!1;try{window.self!==window.top&&window.top.document.querySelector("html.squarespace-damask")&&(window.top.Y||window.top.Y.Get)&&(window.top.Y.Get={js:function(e,t){z(e,window.top.document.getElementsByTagName("head")[0],t)}})}catch(e){console.log(e)}}();
